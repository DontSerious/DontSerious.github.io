<!doctype html><html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta><title>cp2：信息的表示和处理 - Tomato&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Tomato&#039;s Blog"><meta name="msapplication-TileImage" content="static/avatar.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Tomato&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="信息存储 补码 补码的英文名称是 two&amp;#39;s complement。 性质 ~x + 1 &amp;#x3D; -x  在补码表示法中，一个负数的补码等于它的绝对值的二进制表示取反再加上 1。也就是说，如果 x 是一个负数，则 ~x + 1 的结果就是 x 的绝对值的二进制表示。因此，~x + 1 就等于 -x 的补码表示。 举个例子，假设 x &amp;#x3D; -3，它的二进制表示是 11111101（8 位二进制）。那么 ~"><meta property="og:type" content="article"><meta property="og:title" content="cp2：信息的表示和处理"><meta property="og:url" content="https://tomatoblog.netlify.app/Study/csapp/cp2/"><meta property="og:site_name" content="Tomato&#039;s Blog"><meta property="og:description" content="信息存储 补码 补码的英文名称是 two&amp;#39;s complement。 性质 ~x + 1 &amp;#x3D; -x  在补码表示法中，一个负数的补码等于它的绝对值的二进制表示取反再加上 1。也就是说，如果 x 是一个负数，则 ~x + 1 的结果就是 x 的绝对值的二进制表示。因此，~x + 1 就等于 -x 的补码表示。 举个例子，假设 x &amp;#x3D; -3，它的二进制表示是 11111101（8 位二进制）。那么 ~"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/C2UorU2C.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp2/f2.32floating-point%20formats.png"><meta property="article:published_time" content="2023-03-22T03:25:43.000Z"><meta property="article:modified_time" content="2023-04-08T12:21:09.000Z"><meta property="article:author" content="TOMATO"><meta property="article:tag" content="csapp"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://tomatoblog.netlify.app/static/CSAPP/C2UorU2C.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://tomatoblog.netlify.app/Study/csapp/cp2/"},"headline":"cp2：信息的表示和处理","image":["https://tomatoblog.netlify.app/static/CSAPP/C2UorU2C.png","https://tomatoblog.netlify.app/static/CSAPP/cp2/f2.32floating-point%20formats.png"],"datePublished":"2023-03-22T03:25:43.000Z","dateModified":"2023-04-08T12:21:09.000Z","author":{"@type":"Person","name":"TOMATO"},"publisher":{"@type":"Organization","name":"Tomato's Blog","logo":{"@type":"ImageObject","url":{"light":"static/avatar.jpg","dark":"static/avatar.jpg"}}},"description":"信息存储 补码 补码的英文名称是 two&#39;s complement。 性质 ~x + 1 &#x3D; -x  在补码表示法中，一个负数的补码等于它的绝对值的二进制表示取反再加上 1。也就是说，如果 x 是一个负数，则 ~x + 1 的结果就是 x 的绝对值的二进制表示。因此，~x + 1 就等于 -x 的补码表示。 举个例子，假设 x &#x3D; -3，它的二进制表示是 11111101（8 位二进制）。那么 ~"}</script><link rel="canonical" href="https://tomatoblog.netlify.app/Study/csapp/cp2/"><link rel="icon" href="/static/avatar.jpg"><link rel="stylesheet" href="/css/font/fontawesome/css/all.min.css"><link rel="stylesheet" href="/js/imaegoo/highlight.js/11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="/css/default.css"><link rel="stylesheet" href="/js/imaegoo/cookieconsent/3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="/js/imaegoo/lightgallery/1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="/js/imaegoo/justifiedGallery/3.8.1/dist/css/justifiedGallery.min.css"><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="/js/imaegoo/pace-js/1.2.4/pace.min.js"></script><script>(function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();</script><meta name="generator" content="Hexo 7.1.1"></head><body class="is-3-column"><script type="text/javascript" src="/js/imaegoo/night.js"></script><canvas id="universe"></canvas><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img class="logo-img" src="/static/avatar.jpg" alt="Tomato&#039;s Blog" height="28"><img class="logo-img-dark" src="/static/avatar.jpg" alt="Tomato&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives/">时间轴</a><a class="navbar-item" href="/categories/">分类</a><a class="navbar-item" href="/tags/">标签</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i><span>  目录</span></a><a class="navbar-item night" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2023-03-22T03:25:43.000Z" title="3/22/2023, 3:25:43 AM">2023-03-22</time>发表</span><span class="level-item"><time datetime="2023-04-08T12:21:09.000Z" title="4/8/2023, 12:21:09 PM">2023-04-08</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Study/">Study</a></span><span class="level-item">19 分钟读完 (大约2793个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">cp2：信息的表示和处理</h1><div class="content"><h1 id="信息存储">信息存储</h1><h2 id="补码">补码</h2><p>补码的英文名称是 <code>two's complement</code>。</p><h3 id="性质">性质</h3><p>~x + 1 = -x</p><ul><li>在补码表示法中，一个负数的补码等于它的绝对值的二进制表示取反再加上 1。也就是说，如果 x 是一个负数，则 ~x + 1 的结果就是 x 的绝对值的二进制表示。因此，~x + 1 就等于 -x 的补码表示。</li><li>举个例子，假设 x = -3，它的二进制表示是 11111101（8 位二进制）。那么 ~x 的结果就是 00000010，再加上 1 就是 00000011，这就是 -3 的补码表示。</li><li>这个等式在计算机中被广泛使用，因为它可以避免使用负号操作符，从而提高了运算速度和效率。</li></ul><h2 id="虚拟内存：">虚拟内存：</h2><ol><li><p>大多数计算机使用 8 位的块，或者字节(Byte)，作为最小的可寻址的内存单元，而不是访问内存中单独的位。机器级程序将内存视为一个非常大的字节数组，称为虚拟内存(virtual address space)。</p></li><li><p>内存的每个字节都有一个唯一的地址，所有可能地址的集合就称为虚拟地址空间。</p></li></ol><h2 id="字数据大小">字数据大小</h2><h3 id="unsigned-和-signed-之间的相互转换">unsigned 和 signed 之间的相互转换</h3><p><img src="../../../static/CSAPP/C2UorU2C.png" alt="Alt text"></p><p><strong>unsigned 和 signed 建议不要混用</strong></p><h3 id="32位和64位系统中的字节大小差异">32位和64位系统中的字节大小差异</h3><ul><li>因为32位和64位系统，相同的数据类型会存在不同字节大小的差异。</li><li>于是<code>ISO C99</code>标准中出现了头文件<code>stdint.h</code>引入了<code>intN_t</code>和<code>intN_t</code>，对不同的N值指定N位有符号和无符号整数。</li><li>大多数编译器允许N为8、16、32和64</li><li>声明为<code>uint16_t</code>，表示一个16位无符号变量；声明为<code>int32_t</code>，表示一个32位有符号变量</li><li><strong>使用确定大小的整数类型是程序员准确控制数据表示的最佳途径。</strong></li></ul><h3 id="用宏打印intN-t和intN-t">用宏打印<code>intN_t</code>和<code>intN_t</code></h3><ul><li>确定宽度类型的带格式打印需要使用宏，以与系统相关的方式扩展为格式串。因此，举个例子来说，变量x和y的类型是 int32_t和uint64_t，可以通过调用printf来打印它们的值，如下所示:</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;x=%&quot;</span>PRId32“，y = %<span class="string">&quot;PRIu64&quot;</span>\n<span class="string">&quot;，x，y);</span></span><br></pre></td></tr></table></figure><ul><li>编译为64位程序时，宏<code>PRId32</code>展开成字符串“d”，宏<code>PRIu64</code>则展开成两个字符串“1”“u”。当C预处理器遇到仅用空格(或其他空白字符)分隔的一个字符串常量序列时，就把它们串联起来。因此，上面的 printf 调用就变成了:</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;x= %d,y= %lu\n&quot;</span>，x，y);  </span><br></pre></td></tr></table></figure><p><strong>使用宏能保证:不论代码是如何被编译的，都能生成正确的格式字符串。</strong></p><h2 id="寻址和字节顺序">寻址和字节顺序</h2><h3 id="16进制浮点数的表示">16进制浮点数的表示</h3><p>相同的数字，用整数存储的和用浮点数存储的十六进制数不一样<br><strong>整数中除了最高有效位1，其他都存在与浮点数中</strong></p><h2 id="算术右移（-）与逻辑右移（-）">算术右移（&gt;&gt;）与逻辑右移（&gt;&gt;&gt;）</h2><p>逻辑右移就是不考虑符号位，右移一位，左边补零即可。<br>算术右移需要考虑符号位，右移一位，若符号位为1，就在左边补1,；否则，就补0。</p><h2 id="移位">移位</h2><table id="align_table"><tr><td colspan="2">x</td><td colspan="2">x << 3</td><td colspan="2">x >> 2(逻辑的)</td><td colspan="2">x >> 2(算术的)</td></tr><tr><td>十六进制</td><td>二进制</td><td>二进制</td><td>十六进制</td><td>二进制</td><td>十六进制</td><td>二进制</td><td>十六进制</td></tr><tr><td>0xC3</td><td>11000011</td><td>00011000</td><td>0x18</td><td>00110000</td><td>0x30</td><td>11110000</td><td>0xF0</td></tr><tr><td>0x75</td><td>01110101</td><td>10101000</td><td>0xA8</td><td>00011101</td><td>0x1D</td><td>00011101</td><td>0x1D</td></tr><tr><td>0x87</td><td>10000111</td><td>00111000</td><td>0x38</td><td>00100001</td><td>0x21</td><td>11100001</td><td>0xE1</td></tr><tr><td>0x66</td><td>01100110</td><td>00110000</td><td>0x30</td><td>00011001</td><td>0x19</td><td>00011001</td><td>0x19</td></tr></table><h1 id="整数表示">整数表示</h1><h2 id="show-bytes">show_bytes()</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">char</span> *byte_pointer;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">show_bytes</span><span class="params">(byte_pointer start, <span class="type">size_t</span> len)</span> &#123;</span><br><span class="line">    <span class="type">size_t</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++) </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot; %.2x&quot;</span>, start[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">show_int</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    show_bytes((byte_pointer) &amp;x, <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">show_float</span><span class="params">(<span class="type">float</span> x)</span> &#123;</span><br><span class="line">    show_bytes((byte_pointer) &amp;x, <span class="keyword">sizeof</span>(<span class="type">float</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">show_pointer</span><span class="params">(<span class="type">void</span> *x)</span> &#123;</span><br><span class="line">    show_bytes((byte_pointer) &amp;x, <span class="keyword">sizeof</span>(<span class="type">void</span> *));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="C语言中的有符号数和无符号数">C语言中的有符号数和无符号数</h2><p>当执行一个运算时，如果它的一个运算数是有符号的而另一个是无符号的，那么C语言会隐式地将有符号参数强制类型转换为无符号数，并假设这两个数都是非负的，来执行运算。</p><h3 id="升级规则">升级规则</h3><table><thead><tr><th style="text-align:center">表达式</th><th style="text-align:center">类型</th><th style="text-align:center">求值</th></tr></thead><tbody><tr><td style="text-align:center">-2147483647-1 == 2147483648U</td><td style="text-align:center">无符号</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">-2147483647-1 &lt; 2147483647</td><td style="text-align:center">有符号</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">-2147483647-1U &lt; 2147483647</td><td style="text-align:center">无符号</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">-2147483647-1 &lt; -2147483647</td><td style="text-align:center">有符号</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">-2147483647-1U &lt; -2147483647</td><td style="text-align:center">无符号</td><td style="text-align:center">0</td></tr></tbody></table><h2 id="扩展一个数字的位表示">扩展一个数字的位表示</h2><h3 id="从一个较小的数据类型转换到一个较大的数据类型是可以的">从一个较小的数据类型转换到一个较大的数据类型是可以的</h3><p>零扩展(zero extension)</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">short</span> sx = <span class="number">-12345</span>;          <span class="comment">/*-12345*/</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">short</span> usx = sx;    <span class="comment">/* 53191*/</span></span><br><span class="line"><span class="type">int</span> x = sx;                 <span class="comment">/* -12345*/</span></span><br><span class="line"><span class="type">unsigned</span> ux = usx;          <span class="comment">/* 53191*/</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;sx = %d:\t&quot;</span>, sx);</span><br><span class="line">show_bytes((byte_pointer) &amp;sx, <span class="keyword">sizeof</span>(<span class="type">short</span>));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;usx = %u:\t&quot;</span>, usx);</span><br><span class="line">show_bytes((byte_pointer) &amp;usx, <span class="keyword">sizeof</span>(<span class="type">unsigned</span> <span class="type">short</span>));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;x = %d:\t&quot;</span>, x);</span><br><span class="line">show_bytes((byte_pointer) &amp;x, <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ux = %u:\t&quot;</span>, ux);</span><br><span class="line">show_bytes((byte_pointer) &amp;ux, <span class="keyword">sizeof</span>(<span class="type">unsigned</span>));</span><br></pre></td></tr></table></figure><p>在采用补码表示的 32 位大端法机器上运行这段代码时，打印出如下输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sx  = -12345:   cf c7</span><br><span class="line">usx = 53191:    cf c7</span><br><span class="line">x   = -12345:   ff ff cf c7</span><br><span class="line">ux  = 53191:    00 00 cf c7</span><br></pre></td></tr></table></figure><h3 id="从一个较大的数据类型转换到一个较小的数据类型是不可以的">从一个较大的数据类型转换到一个较小的数据类型是不可以的</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">short</span> sx = <span class="number">-12345</span>;     <span class="comment">/*-12345*/</span></span><br><span class="line"><span class="type">unsigned</span> uy = sx;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;uy = %u:\t&quot;</span>, uy);</span><br><span class="line">show_bytes((byte_pointer) &amp;uy, <span class="keyword">sizeof</span>(<span class="type">unsigned</span>));</span><br></pre></td></tr></table></figure><p>在一台大端法机器上运行这段代码时，打印出如下输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uy = 4294954951:    ff ff cf c7</span><br></pre></td></tr></table></figure><p>这表明当把<code>short</code>转换为<code>unsigned</code>时，我们应该先改变大小，之后再完成从有符号到无符号的转换。也就是说<code>(unsigned)sx</code>等价于<code>(unsigned)(int)sx</code>，求值得到<code>4294954951</code>，而不等价于<code>(unsigned)(unsigned short)sx</code>，后者求值得到<code>53191</code>。</p><h3 id="C-函数">C 函数</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">fun1</span><span class="params">(<span class="type">unsigned</span> word)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="type">int</span>) ((word &lt;&lt; <span class="number">24</span>) &gt;&gt; <span class="number">24</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">fun2</span><span class="params">(<span class="type">unsigned</span> word)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ((<span class="type">int</span>) word &lt;&lt; <span class="number">24</span>) &gt;&gt; <span class="number">24</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:center">word</th><th style="text-align:center">func1</th><th style="text-align:center">func2</th></tr></thead><tbody><tr><td style="text-align:center">0x00000076</td><td style="text-align:center">0x00000076</td><td style="text-align:center">0x00000076</td></tr><tr><td style="text-align:center">0x87654321</td><td style="text-align:center">0x00000021</td><td style="text-align:center">0x00000021</td></tr><tr><td style="text-align:center">0x000000C9</td><td style="text-align:center">0x000000C9</td><td style="text-align:center">0xFFFFFFC9</td></tr><tr><td style="text-align:center">0xEDCBA987</td><td style="text-align:center">0x00000087</td><td style="text-align:center">0xFFFFFF87</td></tr></tbody></table><ul><li>func1 没有改变word的值</li><li>func2 当word倒数第二个字节位置处的数字大于等于8时，会输出一个负数</li></ul><h1 id="整数运算">整数运算</h1><h2 id="加法">加法</h2><h3 id="无符号加法">无符号加法</h3><table id="align_table"><tr><td colspan="2">x</td><td colspan="2">-x(u 4)</td></tr><tr><td>十六进制</td><td>十进制</td><td>十进制</td><td>十六进制</td></tr><tr><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>5</td><td>5</td><td>11</td><td>B</td></tr><tr><td>8</td><td>8</td><td>8</td><td>8</td></tr><tr><td>D</td><td>13</td><td>3</td><td>3</td></tr><tr><td>F</td><td>15</td><td>1</td><td>1</td></tr></table><p><em>2.28</em></p><h4 id="代码">代码</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Determine whether arguments can be added without overflow */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">uAdd_ok</span><span class="params">(<span class="type">unsigned</span> x, <span class="type">unsigned</span> y)</span> &#123;</span><br><span class="line">    <span class="type">unsigned</span> sum = x + y;</span><br><span class="line">    <span class="keyword">return</span> sum &gt;= x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="补码加法">补码加法</h3><table><thead><tr><th style="text-align:center">x</th><th style="text-align:center">y</th><th style="text-align:center">x + y</th><th style="text-align:center">x + y(t 5)</th><th style="text-align:center">情况</th></tr></thead><tbody><tr><td style="text-align:center">[10100](-12)</td><td style="text-align:center">[10001](-15)</td><td style="text-align:center">[100101](-27)</td><td style="text-align:center">[00101](5)</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">[11000](-8)</td><td style="text-align:center">[11000](-8)</td><td style="text-align:center">[110000](-16)</td><td style="text-align:center">[10000](-16)</td><td style="text-align:center">2</td></tr><tr><td style="text-align:center">[10111](-9)</td><td style="text-align:center">[01000](8)</td><td style="text-align:center">[111111](-1)</td><td style="text-align:center">[11111](-1)</td><td style="text-align:center">2</td></tr><tr><td style="text-align:center">[00010](2)</td><td style="text-align:center">[00101](5)</td><td style="text-align:center">[000111](7)</td><td style="text-align:center">[00111](7)</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">[01100](12)</td><td style="text-align:center">[00100](4)</td><td style="text-align:center">[010000](16)</td><td style="text-align:center">[10000](-16)</td><td style="text-align:center">4</td></tr></tbody></table><p><em>2.29</em></p><h4 id="代码-v2">代码</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Determine whether arguments can be added without overflow */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">tAdd_ok</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">    <span class="type">int</span> sum = x + y;</span><br><span class="line">    <span class="type">int</span> neg_over = x &lt; <span class="number">0</span> &amp;&amp; y &lt; <span class="number">0</span> &amp;&amp; sum &gt;= <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> pos_over = x &gt; <span class="number">0</span> &amp;&amp; y &gt; <span class="number">0</span> &amp;&amp; sum &lt; <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> !neg_over &amp;&amp; !pos_over;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="补码的非">补码的非</h2><table id="align_table"><tr><td colspan="2">x</td><td colspan="2">-x(t 4)</td></tr><tr><td>十六进制</td><td>十进制</td><td>十进制</td><td>十六进制</td></tr><tr><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>5</td><td>5</td><td>-5</td><td>B</td></tr><tr><td>8</td><td>-8</td><td>-8</td><td>8</td></tr><tr><td>D</td><td>-3</td><td>3</td><td>3</td></tr><tr><td>F</td><td>-1</td><td>1</td><td>1</td></tr></table><p><em>2.33</em></p><h2 id="乘法">乘法</h2><h3 id="二进制乘法运算">二进制乘法运算</h3><p>模仿手工算十进制乘法，一位位乘然后再加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">     1001</span><br><span class="line">*    1101</span><br><span class="line">=============</span><br><span class="line">     1001</span><br><span class="line">    0000</span><br><span class="line">   1001</span><br><span class="line">+ 1001</span><br><span class="line">=============</span><br><span class="line">  1110101</span><br></pre></td></tr></table></figure><h3 id="规律">规律</h3><ul><li>虽然完整的乘机的位级表示可能会不同，但是截断后成绩的位级表示是相同的。</li></ul><table><thead><tr><th style="text-align:center">模式</th><th style="text-align:center">x</th><th style="text-align:center">y</th><th style="text-align:center">x·y</th><th style="text-align:center">截断的x·y</th></tr></thead><tbody><tr><td style="text-align:center">无符号<br>补码</td><td style="text-align:center">[100](4)<br>[100](-4)</td><td style="text-align:center">[101](5)<br>[101](-3)</td><td style="text-align:center">[010100](20)<br>[001100](12)</td><td style="text-align:center">[100](4)<br>[100](-4)</td></tr><tr><td style="text-align:center">无符号<br>补码</td><td style="text-align:center">[010](2)<br>[010](2)</td><td style="text-align:center">[111](7)<br>[111](-1)</td><td style="text-align:center">[001110](14)<br>[111110](-2)</td><td style="text-align:center">[110](6)<br>[110](-2)</td></tr><tr><td style="text-align:center">无符号<br>补码</td><td style="text-align:center">[110](6)<br>[110](-2)</td><td style="text-align:center">[110](6)<br>[110](-2)</td><td style="text-align:center">[100100](36)<br>[000100](4)</td><td style="text-align:center">[100](4)<br>[100](-4)</td></tr></tbody></table><h3 id="代码-v3">代码</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">tMul_ok</span><span class="params">(<span class="type">int32_t</span> x, <span class="type">int32_t</span> y)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int32_t</span> p = x * y;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* Either x is zero, or dividing p by x gives y */</span></span><br><span class="line">	<span class="keyword">return</span> !x || p / x == y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">tMul_ok2</span><span class="params">(<span class="type">int32_t</span> x, <span class="type">int32_t</span> y)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int64_t</span> p = (<span class="type">int64_t</span>)x * y; <span class="comment">/*一定要先将右边手动转成 int64_t */</span></span><br><span class="line">	<span class="comment">/*printf(&quot;p=%&quot; PRId64 &quot;, q=%&quot; PRId32 &quot;\n&quot;, p,q);*/</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> p == (<span class="type">int32_t</span>)p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="乘以常数">乘以常数</h3><p>用移位计算：</p><ul><li>形式A:<code>(x&lt;&lt;n)+(x&lt;&lt;(n-1))+...+(x&lt;&lt;m)</code></li><li>形式B:<code>(x&lt;&lt;(n+1))-(x&lt;&lt;m)</code></li></ul><p>练习：</p><table><thead><tr><th style="text-align:center">K</th><th style="text-align:center">移位</th><th style="text-align:center">加法/减法</th><th style="text-align:center">表达式</th></tr></thead><tbody><tr><td style="text-align:center">6</td><td style="text-align:center">2</td><td style="text-align:center">1</td><td style="text-align:center">(x &lt;&lt; 2) + (x&lt;&lt;1)</td></tr><tr><td style="text-align:center">31</td><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">(x &lt;&lt;5 ) - x</td></tr><tr><td style="text-align:center">-6</td><td style="text-align:center">2</td><td style="text-align:center">1</td><td style="text-align:center">(x &lt;&lt; 1) - (x &lt;&lt; 3)</td></tr><tr><td style="text-align:center">55</td><td style="text-align:center">2</td><td style="text-align:center">2</td><td style="text-align:center">(x &lt;&lt; 6) - (x &lt;&lt;3) - x</td></tr></tbody></table><ul><li>第二行比较重要的一点是11111的第一个1的下标是4，最后一个1的下标是0，所以n=4,m=0,当确定了n,m之后就可以根据公式进行计算</li><li>第一行6的二进制表示我为0110，所以n=2,m=1<ul><li>形式A：x * k = (x &lt;&lt; 2) + (x&lt;&lt;1)</li><li>形式B：x * k = x * (2<sup>3</sup> - 2<sup>1</sup>) = (x&lt;&lt;3) - (x &lt;&lt; 1)</li></ul></li><li>第二行31的二进制表示为11111，所以n=4,m=0<ul><li>形式A：x * k = (x&lt;&lt;4) + (x&lt;&lt;3) + (x&lt;&lt;2) + (x&lt;&lt;1) + x</li><li>形式B：x * k = (x &lt;&lt;5 ) - x</li></ul></li><li>第三行-6的二进制表示为-110（补码表示），所以n = 2，m = 1<ul><li>形式A：x * k = -((x &lt;&lt; 2) + (x&lt;&lt;1))=-(x &lt;&lt; 2) - (x &lt;&lt; 1)</li><li>形式B：x * k = -( (x&lt;&lt;3) - (x &lt;&lt; 1)) = (x &lt;&lt; 1) - (x &lt;&lt; 3)</li></ul></li><li>第四行55的二进制为110111，所以n=5,m=3<ul><li>形式A：x * k = (x * 1 * 2<sup>5</sup>) + (x * 1 * 2<sup>4</sup>) + (x * 1 * 2<sup>2</sup>) + (x * 1 * 2<sup>1</sup>) + (x * 1 * 2<sup>0</sup>) = (x &lt;&lt; 5) + (x &lt;&lt; 4) + (x &lt;&lt; 2) + (x &lt;&lt; 1) + x</li><li>形式B：x * k = (x * 2<sup>6</sup>) - (x * 2<sup>3</sup>) - (x * 2<sup>0</sup>) = (x &lt;&lt; 6) - (x &lt;&lt;3) - x</li></ul></li></ul><h2 id="除法">除法</h2><p>理想的除法状态为：</p><ul><li>对于 x &gt;= 0 和 x &gt; y，结果会是 x / y (向下取整)</li><li>对于 x &lt; 0 和 y &gt; 0，结果会是 x / y (向上取整)</li><li>也就是向零取整</li></ul><h3 id="代码-v4">代码</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 计算x/16，要考虑偏置，不能使用除、模、乘运算、条件语句以及比较运算符</span></span><br><span class="line"><span class="comment">// 假设int是32位长</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">book_div16</span><span class="params">(<span class="type">int</span> x)</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="comment">/* Compute bias to be either 0 (x &gt;= 0) or 15 (x &lt; 0) */</span></span><br><span class="line">        <span class="type">int</span> bias = (x &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0xF</span>;<span class="comment">//右移31位后，32位上面的是符号位的值</span></span><br><span class="line">        <span class="comment">//如果为非负数，符号位为0，bias变量为0</span></span><br><span class="line">        <span class="comment">//如果为负数，符号位为1，bias变量为0xF，即15</span></span><br><span class="line">        <span class="keyword">return</span> (x + bias) &gt;&gt; <span class="number">4</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="偏置技术-bias">偏置技术(bias)</h1><p>bias = 2<sup>(k-1)</sup> - 1</p><ul><li>k是阶码位长度</li></ul><h2 id="整数">整数</h2><p>用偏置技术解决修正不合适的舍入：</p><ul><li>对于整数 x 和 y (y &gt; 0) 有 <code>⌈x / y⌉ = ⌊(x + y – 1) / y⌋</code></li><li>于是计算⌈x/2<sup>k</sup>⌉有算术右移的补码机器表达式 <code>( x &lt; 0 ? (x + (1 &lt;&lt; k) - 1) : x) &gt;&gt; k</code></li></ul><h1 id="浮点数">浮点数</h1><p><img src="../../../static/CSAPP/cp2/f2.32floating-point%20formats.png" alt=""></p><h2 id="IEEE浮点表示">IEEE浮点表示</h2><p>定位表示法不能非常有效地表示非常大的是数字，所以我们希望通过给定x和y的值表示形如 x * 2<sup>y</sup> 的数。<br>IEEE浮点标准用 V=(-1)<sup>s</sup> * M * 2<sup>E</sup> 的形式来表示一个数</p><ul><li>s：符号 决定这个数是正数还是负数；s直接编码符号s</li><li>E：阶码 偏置之后的阶码值 作用是对浮点数加权，权重是2的E次幂<ul><li>k 位的阶码字段 <code>exp</code> 编码阶码</li><li>e：假定阶码字段是一个无符号整数所表示的值</li><li>2<sup>E</sup>：阶码的权重</li></ul></li><li>M：尾数 是一个二进制小数，范围为 <code>1~2-ε</code> 或者是 <code>0~1-ε</code><ul><li>n 位的小数字段 <code>frac</code> 编码尾数</li><li>f：小数值</li></ul></li><li>M * 2<sup>E</sup>：该数(未归约的)小数值</li><li>V：该数规约后的小数值</li><li>float格式中，s、<code>exp</code> 和 <code>frac</code> 字段分别为1位，k=8位和n=23位，得到一个32位的表示</li><li>double格式中，s、<code>exp</code> 和 <code>frac</code> 字段分别为1位，k=11位和n=52位，得到一个64位的表示</li></ul><h3 id="单精度浮点格式-float">单精度浮点格式(float)</h3><p>s、<code>exp</code> 和 <code>frac</code> 字段分别为 1 位，k=8 位和 n=23 位，得到一个32位的表示</p><h3 id="双精度浮点格式-double">双精度浮点格式(double)</h3><p>s、<code>exp</code> 和 <code>frac</code> 字段分别为 1 位，k=11 位和 n=52 位，得到一个64位的表示</p><h3 id="偏置-bias">偏置(bias)</h3><ul><li>Bias是一个等于 2<sup>k-1</sup>-1 (单精度是127，双精度是1023)的偏置值</li><li>对于单精度是 <code>-126~+127</code> 对于双精度是 <code>-1022~+1023</code></li></ul><h3 id="规格化的值">规格化的值</h3><ul><li>当<code>exp</code>的位模式既不全为0(数值0)，也不全为1(单精度数值为255，双精度数值为2047)时，</li><li><code>E = e - Bias</code></li><li><code>M = 1 + f</code>，小数字段 <code>frac</code> 被解释为描述小数值 f，<code>M &gt;= 1</code> 永远成立</li></ul><h3 id="非格式化的值">非格式化的值</h3><ul><li>当阶码域为全 0 时</li><li><code>E = 1 - Bias</code></li><li><code>M = f</code></li><li>提供了表示数值 0 的方法</li><li>表示非常接近于 0.0 的数</li></ul><h3 id="特殊值">特殊值</h3><ul><li>当阶码域为全 1 时</li><li>无穷</li></ul><h4 id="练习">练习</h4><table><thead><tr><th style="text-align:center">位</th><th style="text-align:center">e</th><th style="text-align:center">E</th><th style="text-align:center">2<sup>E</sup></th><th style="text-align:center">f</th><th style="text-align:center">M</th><th style="text-align:center">2<sup>E</sup> * M</th><th style="text-align:center">V</th><th style="text-align:center">十进制</th></tr></thead><tbody><tr><td style="text-align:center">0 00 00</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">0 00 01</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">1/4</td><td style="text-align:center">1/4</td><td style="text-align:center">1/4</td><td style="text-align:center">1/4</td><td style="text-align:center">0.25</td></tr><tr><td style="text-align:center">0 00 10</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">1/2</td><td style="text-align:center">1/2</td><td style="text-align:center">1/2</td><td style="text-align:center">1/2</td><td style="text-align:center">0.5</td></tr><tr><td style="text-align:center">0 00 11</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">3/4</td><td style="text-align:center">3/4</td><td style="text-align:center">3/4</td><td style="text-align:center">3/4</td><td style="text-align:center">0.75</td></tr><tr><td style="text-align:center">0 01 00</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">0 01 01</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">1/4</td><td style="text-align:center">5/4</td><td style="text-align:center">5/4</td><td style="text-align:center">5/4</td><td style="text-align:center">1.25</td></tr><tr><td style="text-align:center">0 01 10</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">1/2</td><td style="text-align:center">3/2</td><td style="text-align:center">3/2</td><td style="text-align:center">3/2</td><td style="text-align:center">1.5</td></tr><tr><td style="text-align:center">0 01 11</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">3/4</td><td style="text-align:center">7/4</td><td style="text-align:center">7/4</td><td style="text-align:center">7/4</td><td style="text-align:center">1.75</td></tr><tr><td style="text-align:center">0 10 00</td><td style="text-align:center">2</td><td style="text-align:center">1</td><td style="text-align:center">2</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">2</td><td style="text-align:center">2</td><td style="text-align:center">2</td></tr><tr><td style="text-align:center">0 10 01</td><td style="text-align:center">2</td><td style="text-align:center">1</td><td style="text-align:center">2</td><td style="text-align:center">1/4</td><td style="text-align:center">5/4</td><td style="text-align:center">10/4</td><td style="text-align:center">5/2</td><td style="text-align:center">2.5</td></tr><tr><td style="text-align:center">0 10 10</td><td style="text-align:center">2</td><td style="text-align:center">1</td><td style="text-align:center">2</td><td style="text-align:center">1/2</td><td style="text-align:center">3/2</td><td style="text-align:center">6/2</td><td style="text-align:center">3</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">0 10 11</td><td style="text-align:center">2</td><td style="text-align:center">1</td><td style="text-align:center">2</td><td style="text-align:center">3/4</td><td style="text-align:center">7/4</td><td style="text-align:center">14/4</td><td style="text-align:center">7/2</td><td style="text-align:center">3.5</td></tr><tr><td style="text-align:center">0 11 00</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">无穷大</td><td style="text-align:center">-</td></tr><tr><td style="text-align:center">0 11 01</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">NaN</td><td style="text-align:center">-</td></tr><tr><td style="text-align:center">0 11 10</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">NaN</td><td style="text-align:center">-</td></tr><tr><td style="text-align:center">0 11 11</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">NaN</td><td style="text-align:center">-</td></tr></tbody></table><h3 id="整数值转换为浮点形式">整数值转换为浮点形式</h3><ol><li>12345 具有二进制表示[11 0000 0011 1001]</li><li>通过将二进制小数点左移 13 位，得到12345=1.1000000111001 * 2<sup>13</sup></li><li>为了用IEEE单精度来编码，我们丢弃开头的 1，并且在末尾增加 10 个 0 ，来构造小数字段，得到[100 0000 1110 0100 0000 0000]</li><li>为了构造阶码字段，我们用 13 加上偏置量 127，得到140，其二进制表示为[1000 1100]。</li><li>加上符号位 0，我们就得到二进制的浮点表示[0100 0110 0100 0000 1110 0100 0000 0000]</li></ol><h4 id="练习-v2">练习</h4><p>将整数 3 510 593 转换为单精度浮点形式：</p><ol><li>3 510 593 具有二进制表示[11 0101 1111 0001 0100 0001]</li><li>通过将二进制小数点左移 21 位，得到 3 510 593 = 1.101011001000101000001 * 2<sup>21</sup></li><li>丢弃开头的 1. ，并且在末尾增加 2 个 0 ，来构造小数字段，得到[101 0110 0100 0101 0000 0100]</li><li>为了构造阶码字段，我们用 21 加上偏置量 127，得到148，其二进制表示为[1001 0100]</li><li>加上符号位 0，我们就得到二进制的浮点表示[0100 1010 0101 0110 0100 0101 0000 0100]</li></ol></div><div class="article-licensing box"><div class="licensing-title"><p>cp2：信息的表示和处理</p><p><a href="https://tomatoblog.netlify.app/Study/csapp/cp2/">https://tomatoblog.netlify.app/Study/csapp/cp2/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>TOMATO</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2023-03-22</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2023-04-08</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY 4.0" href="https://creativecommons.org/licenses/by/4.0/deed.zh">CC BY 4.0</a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/csapp/">csapp</a></div></article></div><div class="card"><nav class="post-navigation mt-4 level is-mobile card-content"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/Tutorial/hexo/vscode/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">VSCode memo</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/Study/psychology/40-search/"><span class="level-item">40 search</span><i class="level-item fas fa-chevron-right"></i></a></div></nav></div></div><style>.column.column-left,.column.column-right{display:none}</style><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/static/avatar.jpg" alt="ToMaTo"></figure><p class="title is-size-4 is-block" style="line-height:inherit">ToMaTo</p><p class="is-size-6 is-block">Back-end Developer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>GuangZhou, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">59</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">29</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/dontSerious/" target="_blank" rel="noopener" id="widget-follow">Github</a></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/04/"><span class="level-start"><span class="level-item">2024年04月</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/03/"><span class="level-start"><span class="level-item">2024年03月</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/02/"><span class="level-start"><span class="level-item">2024年02月</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/12/"><span class="level-start"><span class="level-item">2023年12月</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/11/"><span class="level-start"><span class="level-item">2023年11月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/10/"><span class="level-start"><span class="level-item">2023年10月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/09/"><span class="level-start"><span class="level-item">2023年09月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/08/"><span class="level-start"><span class="level-item">2023年08月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/06/"><span class="level-start"><span class="level-item">2023年06月</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/05/"><span class="level-start"><span class="level-item">2023年05月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/04/"><span class="level-start"><span class="level-item">2023年04月</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/03/"><span class="level-start"><span class="level-item">2023年03月</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/02/"><span class="level-start"><span class="level-item">2023年02月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time datetime="2024-04-28T10:24:18.000Z">2024-04-28</time></p><p class="title"><a href="/FrontEnd/Flutter/">flutter 笔记</a></p><p class="categories"><a href="/categories/FrontEnd/">FrontEnd</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2024-03-26T06:43:15.000Z">2024-03-26</time></p><p class="title"><a href="/Interview/go/">go面试</a></p><p class="categories"><a href="/categories/Interview/">Interview</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2024-03-26T02:10:11.000Z">2024-03-26</time></p><p class="title"><a href="/Interview/datastruct/">数据结构和算法面试</a></p><p class="categories"><a href="/categories/Interview/">Interview</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2024-03-26T02:10:11.000Z">2024-03-26</time></p><p class="title"><a href="/Interview/distributed/">分布式面试</a></p><p class="categories"><a href="/categories/Interview/">Interview</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2024-03-16T07:28:10.000Z">2024-03-16</time></p><p class="title"><a href="/BackEnd/sql/index/">SQL 索引</a></p><p class="categories"><a href="/categories/BackEnd/">BackEnd</a></p></div></article></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#信息存储"><span class="level-left"><span class="level-item">1</span><span class="level-item">信息存储</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#补码"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">补码</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#性质"><span class="level-left"><span class="level-item">1.1.1</span><span class="level-item">性质</span></span></a></li></ul></li><li><a class="level is-mobile" href="#虚拟内存："><span class="level-left"><span class="level-item">1.2</span><span class="level-item">虚拟内存：</span></span></a></li><li><a class="level is-mobile" href="#字数据大小"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">字数据大小</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#unsigned-和-signed-之间的相互转换"><span class="level-left"><span class="level-item">1.3.1</span><span class="level-item">unsigned 和 signed 之间的相互转换</span></span></a></li><li><a class="level is-mobile" href="#32位和64位系统中的字节大小差异"><span class="level-left"><span class="level-item">1.3.2</span><span class="level-item">32位和64位系统中的字节大小差异</span></span></a></li><li><a class="level is-mobile" href="#用宏打印intN-t和intN-t"><span class="level-left"><span class="level-item">1.3.3</span><span class="level-item">用宏打印intN_t和intN_t</span></span></a></li></ul></li><li><a class="level is-mobile" href="#寻址和字节顺序"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">寻址和字节顺序</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#16进制浮点数的表示"><span class="level-left"><span class="level-item">1.4.1</span><span class="level-item">16进制浮点数的表示</span></span></a></li></ul></li><li><a class="level is-mobile" href="#算术右移（-）与逻辑右移（-）"><span class="level-left"><span class="level-item">1.5</span><span class="level-item">算术右移（&gt;&gt;）与逻辑右移（&gt;&gt;&gt;）</span></span></a></li><li><a class="level is-mobile" href="#移位"><span class="level-left"><span class="level-item">1.6</span><span class="level-item">移位</span></span></a></li></ul></li><li><a class="level is-mobile" href="#整数表示"><span class="level-left"><span class="level-item">2</span><span class="level-item">整数表示</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#show-bytes"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">show_bytes()</span></span></a></li><li><a class="level is-mobile" href="#C语言中的有符号数和无符号数"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">C语言中的有符号数和无符号数</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#升级规则"><span class="level-left"><span class="level-item">2.2.1</span><span class="level-item">升级规则</span></span></a></li></ul></li><li><a class="level is-mobile" href="#扩展一个数字的位表示"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">扩展一个数字的位表示</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#从一个较小的数据类型转换到一个较大的数据类型是可以的"><span class="level-left"><span class="level-item">2.3.1</span><span class="level-item">从一个较小的数据类型转换到一个较大的数据类型是可以的</span></span></a></li><li><a class="level is-mobile" href="#从一个较大的数据类型转换到一个较小的数据类型是不可以的"><span class="level-left"><span class="level-item">2.3.2</span><span class="level-item">从一个较大的数据类型转换到一个较小的数据类型是不可以的</span></span></a></li><li><a class="level is-mobile" href="#C-函数"><span class="level-left"><span class="level-item">2.3.3</span><span class="level-item">C 函数</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#整数运算"><span class="level-left"><span class="level-item">3</span><span class="level-item">整数运算</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#加法"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">加法</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#无符号加法"><span class="level-left"><span class="level-item">3.1.1</span><span class="level-item">无符号加法</span></span></a></li><li><a class="level is-mobile" href="#补码加法"><span class="level-left"><span class="level-item">3.1.2</span><span class="level-item">补码加法</span></span></a></li></ul></li><li><a class="level is-mobile" href="#补码的非"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">补码的非</span></span></a></li><li><a class="level is-mobile" href="#乘法"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">乘法</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#二进制乘法运算"><span class="level-left"><span class="level-item">3.3.1</span><span class="level-item">二进制乘法运算</span></span></a></li><li><a class="level is-mobile" href="#规律"><span class="level-left"><span class="level-item">3.3.2</span><span class="level-item">规律</span></span></a></li><li><a class="level is-mobile" href="#代码-v3"><span class="level-left"><span class="level-item">3.3.3</span><span class="level-item">代码</span></span></a></li><li><a class="level is-mobile" href="#乘以常数"><span class="level-left"><span class="level-item">3.3.4</span><span class="level-item">乘以常数</span></span></a></li></ul></li><li><a class="level is-mobile" href="#除法"><span class="level-left"><span class="level-item">3.4</span><span class="level-item">除法</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#代码-v4"><span class="level-left"><span class="level-item">3.4.1</span><span class="level-item">代码</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#偏置技术-bias"><span class="level-left"><span class="level-item">4</span><span class="level-item">偏置技术(bias)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#整数"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">整数</span></span></a></li></ul></li><li><a class="level is-mobile" href="#浮点数"><span class="level-left"><span class="level-item">5</span><span class="level-item">浮点数</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#IEEE浮点表示"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">IEEE浮点表示</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#单精度浮点格式-float"><span class="level-left"><span class="level-item">5.1.1</span><span class="level-item">单精度浮点格式(float)</span></span></a></li><li><a class="level is-mobile" href="#双精度浮点格式-double"><span class="level-left"><span class="level-item">5.1.2</span><span class="level-item">双精度浮点格式(double)</span></span></a></li><li><a class="level is-mobile" href="#偏置-bias"><span class="level-left"><span class="level-item">5.1.3</span><span class="level-item">偏置(bias)</span></span></a></li><li><a class="level is-mobile" href="#规格化的值"><span class="level-left"><span class="level-item">5.1.4</span><span class="level-item">规格化的值</span></span></a></li><li><a class="level is-mobile" href="#非格式化的值"><span class="level-left"><span class="level-item">5.1.5</span><span class="level-item">非格式化的值</span></span></a></li><li><a class="level is-mobile" href="#特殊值"><span class="level-left"><span class="level-item">5.1.6</span><span class="level-item">特殊值</span></span></a></li><li><a class="level is-mobile" href="#整数值转换为浮点形式"><span class="level-left"><span class="level-item">5.1.7</span><span class="level-item">整数值转换为浮点形式</span></span></a></li></ul></li></ul></li></ul></div></div><style>#toc .menu-list>li>a.is-active+.menu-list{display:block}#toc .menu-list>li>a+.menu-list{display:none}</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/BackEnd/"><span class="level-start"><span class="level-item">BackEnd</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/categories/FrontEnd/"><span class="level-start"><span class="level-item">FrontEnd</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Interview/"><span class="level-start"><span class="level-item">Interview</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Memo/"><span class="level-start"><span class="level-item">Memo</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/Project/"><span class="level-start"><span class="level-item">Project</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Study/"><span class="level-start"><span class="level-item">Study</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/categories/Tutorial/"><span class="level-start"><span class="level-item">Tutorial</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Flutter/"><span class="tag">Flutter</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MIT6-S081/"><span class="tag">MIT6.S081</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/React/"><span class="tag">React</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TypeScript/"><span class="tag">TypeScript</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vue-js/"><span class="tag">Vue.js</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bookNote/"><span class="tag">bookNote</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/career/"><span class="tag">career</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cpp/"><span class="tag">cpp</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cs/"><span class="tag">cs</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csapp/"><span class="tag">csapp</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/curriculum/"><span class="tag">curriculum</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dataStruct/"><span class="tag">dataStruct</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/datastruct/"><span class="tag">datastruct</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/distributed/"><span class="tag">distributed</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/go/"><span class="tag">go</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/live/"><span class="tag">live</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/log/"><span class="tag">log</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/memo/"><span class="tag">memo</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/network/"><span class="tag">network</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nodejs/"><span class="tag">nodejs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/obsidian/"><span class="tag">obsidian</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/project/"><span class="tag">project</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/psychology/"><span class="tag">psychology</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/simpleBank/"><span class="tag">simpleBank</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sql/"><span class="tag">sql</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tools/"><span class="tag">tools</span><span class="tag">10</span></a></div></div></div></div></div></div><style>.column.column-left,.column.column-right{display:block}</style></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img class="logo-img" src="/static/avatar.jpg" alt="Tomato&#039;s Blog" height="28"><img class="logo-img-dark" src="/static/avatar.jpg" alt="Tomato&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2024 TOMATO</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/imaegoo/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/deed.zh"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="/js/imaegoo/jquery/3.3.1/dist/jquery.min.js"></script><script src="/js/imaegoo/moment/2.22.2/min/moment-with-locales.min.js"></script><script src="/js/imaegoo/clipboard/2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn")</script><script>var IcarusThemeSettings={article:{highlight:{clipboard:!0,fold:"unfolded"}}}</script><script src="/js/column.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="/js/imaegoo/cookieconsent/3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-right",
        content: {
          message: "此网站使用 Cookie，以启用评论系统和分析功能。",
          dismiss: "知道了",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="/js/imaegoo/lightgallery/1.10.0/dist/js/lightgallery.min.js" defer></script><script src="/js/imaegoo/justifiedGallery/3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><div class="searchbox-pinyin"><label class="checkbox"><input id="search-by-pinyin" type="checkbox" checked><span> 拼音检索</span></label></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/imaegoo/pinyin.js" defer></script><script src="/js/insight.js" defer></script><script>document.addEventListener("DOMContentLoaded",function(){loadInsight({contentUrl:"/content.json"},{hint:"想要查找什么...",untitled:"(无标题)",posts:"文章",pages:"页面",categories:"分类",tags:"标签"})})</script><script type="text/javascript" src="/js/imaegoo/imaegoo.js"></script><script type="text/javascript" src="/js/imaegoo/universe.js"></script></body></html>