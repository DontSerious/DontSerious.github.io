<!doctype html><html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta><title>cp4 处理器体系结构 - Tomato&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Tomato&#039;s Blog"><meta name="msapplication-TileImage" content="static/avatar.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Tomato&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Y86-64 指令集体系结构 程序员可见状态   省略了 %r15 以简化指令的编码 三个一体的条件码：ZF、SF 和 OF Stat：状态码，表明程序执行的总体状态  Y86-64 指令 Y86-64 指令集基本上是 x86-64 指令集的一个子集，它只包括 8 字节整数操作，寻址方式较少，操作也较少。下面是一些细节：  左边是指令的汇编码表示，右边是字节编码 X 86-64 的 movq 指令"><meta property="og:type" content="article"><meta property="og:title" content="cp4 处理器体系结构"><meta property="og:url" content="https://tomatoblog.netlify.app/Study/csapp/cp4/"><meta property="og:site_name" content="Tomato&#039;s Blog"><meta property="og:description" content="Y86-64 指令集体系结构 程序员可见状态   省略了 %r15 以简化指令的编码 三个一体的条件码：ZF、SF 和 OF Stat：状态码，表明程序执行的总体状态  Y86-64 指令 Y86-64 指令集基本上是 x86-64 指令集的一个子集，它只包括 8 字节整数操作，寻址方式较少，操作也较少。下面是一些细节：  左边是指令的汇编码表示，右边是字节编码 X 86-64 的 movq 指令"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.1Y86-64.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.2Y86-64instruction.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.3Function%20codes.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.4register%20identifiers.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.5status%20codes.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.9logic%20gate.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/min3.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.5ALU.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.16Register%20operation.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/register%20file.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.18computations.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.19rmmovq%20mrmovq.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.20pushq%20popq.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.21jxx%20call%20ret.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.22SEQ1.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.23SEQ2.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.24.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.25SEQ3.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.26HCL%20values.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.27SEQ%20fetch.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.28SEQ%20decode%20write-back.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.29SEQ%20execute.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.30SEQ%20memory.png"><meta property="og:image" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.31SEQ%20PC%20update.png"><meta property="article:published_time" content="2023-05-24T06:35:45.000Z"><meta property="article:modified_time" content="2023-06-22T12:20:34.000Z"><meta property="article:author" content="TOMATO"><meta property="article:tag" content="csapp"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.1Y86-64.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://tomatoblog.netlify.app/Study/csapp/cp4/"},"headline":"cp4 处理器体系结构","image":["https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.1Y86-64.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.2Y86-64instruction.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.3Function%20codes.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.4register%20identifiers.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.5status%20codes.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.9logic%20gate.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/min3.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.5ALU.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.16Register%20operation.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/register%20file.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.18computations.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.19rmmovq%20mrmovq.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.20pushq%20popq.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.21jxx%20call%20ret.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.22SEQ1.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.23SEQ2.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.24.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.25SEQ3.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.26HCL%20values.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.27SEQ%20fetch.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.28SEQ%20decode%20write-back.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.29SEQ%20execute.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.30SEQ%20memory.png","https://tomatoblog.netlify.app/static/CSAPP/cp4/f4.31SEQ%20PC%20update.png"],"datePublished":"2023-05-24T06:35:45.000Z","dateModified":"2023-06-22T12:20:34.000Z","author":{"@type":"Person","name":"TOMATO"},"publisher":{"@type":"Organization","name":"Tomato's Blog","logo":{"@type":"ImageObject","url":{"light":"static/avatar.jpg","dark":"static/avatar.jpg"}}},"description":"Y86-64 指令集体系结构 程序员可见状态   省略了 %r15 以简化指令的编码 三个一体的条件码：ZF、SF 和 OF Stat：状态码，表明程序执行的总体状态  Y86-64 指令 Y86-64 指令集基本上是 x86-64 指令集的一个子集，它只包括 8 字节整数操作，寻址方式较少，操作也较少。下面是一些细节：  左边是指令的汇编码表示，右边是字节编码 X 86-64 的 movq 指令"}</script><link rel="canonical" href="https://tomatoblog.netlify.app/Study/csapp/cp4/"><link rel="icon" href="/static/avatar.jpg"><link rel="stylesheet" href="/css/font/fontawesome/css/all.min.css"><link rel="stylesheet" href="/js/imaegoo/highlight.js/11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="/css/default.css"><link rel="stylesheet" href="/js/imaegoo/cookieconsent/3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="/js/imaegoo/lightgallery/1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="/js/imaegoo/justifiedGallery/3.8.1/dist/css/justifiedGallery.min.css"><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="/js/imaegoo/pace-js/1.2.4/pace.min.js"></script><script>(function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();</script><meta name="generator" content="Hexo 7.1.1"></head><body class="is-3-column"><script type="text/javascript" src="/js/imaegoo/night.js"></script><canvas id="universe"></canvas><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img class="logo-img" src="/static/avatar.jpg" alt="Tomato&#039;s Blog" height="28"><img class="logo-img-dark" src="/static/avatar.jpg" alt="Tomato&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives/">时间轴</a><a class="navbar-item" href="/categories/">分类</a><a class="navbar-item" href="/tags/">标签</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i><span>  目录</span></a><a class="navbar-item night" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2023-05-24T06:35:45.000Z" title="5/24/2023, 6:35:45 AM">2023-05-24</time>发表</span><span class="level-item"><time datetime="2023-06-22T12:20:34.000Z" title="6/22/2023, 12:20:34 PM">2023-06-22</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Study/">Study</a></span><span class="level-item">19 分钟读完 (大约2830个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">cp4 处理器体系结构</h1><div class="content"><h1 id="Y86-64-指令集体系结构">Y86-64 指令集体系结构</h1><h2 id="程序员可见状态">程序员可见状态</h2><p><img src="../../../static/CSAPP/cp4/f4.1Y86-64.png" alt=""></p><ul><li>省略了 %r15 以简化指令的编码</li><li>三个一体的条件码：ZF、SF 和 OF</li><li>Stat：状态码，表明程序执行的总体状态</li></ul><h2 id="Y86-64-指令">Y86-64 指令</h2><p>Y86-64 指令集基本上是 x86-64 指令集的一个子集，它只包括 8 字节整数操作，寻址方式较少，操作也较少。下面是一些细节：</p><ul><li>左边是指令的汇编码表示，右边是字节编码</li><li>X 86-64 的 movq 指令分成了 4 个不同的指令：irmovq、rrmovq、mrmovq 和 rmmovq<ul><li>分别显式地指明源和目的的格式</li><li>源可以是立即数（i）、寄存器（r）或内存（m），指令名字第一个字母就表明了源的类型</li><li>目的可以是寄存器（r）和内存（m），指令名字第二个字母指明了目的的类型</li></ul></li><li>和 x 86-64 一样，不允许从一个内存地址直接传送到另一个内存地址。<ul><li>另外，也不允许将立即数传送到内存</li></ul></li><li>有 4 个整数操作指令，如 OPg，它们是 addq、subq、andq 和 xorq<ul><li>只会对寄存器数据进行操作，而 x86-64 还允许对内存数据进行这些操作</li><li>它们会设置三个条件码</li></ul></li><li>halt 指令停止指令的执行。x86-64 中有一个与之相当的 hlt<ul><li>x86-64 的应用程序不允许使用这条指令，它会导致整个系统暂停运行</li><li>对于 Y86-64 来说，执行 halt 指令会导致处理停止运行，并将状态码设置为 HLT</li></ul></li></ul><p><img src="../../../static/CSAPP/cp4/f4.2Y86-64instruction.png" alt=""></p><ul><li>指令编码长度从 1 个字节到 10 个字节不等</li><li>一条指令含有一个单字节的指令指示符，可能含有一个单字节的寄存器指示符，还可能含有一个 8 字节的常数字</li><li>fn 指明是某个整数操作（OPg）、数据传送条件（cmovXX）或是分支条件（jXX）</li><li>所有的数值均用十六进制表示</li></ul><h2 id="指令编码">指令编码</h2><p>每条指令需要 1~ 10 个字节不等，每条指令的第一个字节表明指令的类型</p><ul><li>这个字节分为两个部分</li><li>高四位是代码部分</li><li>第四位是功能部分</li><li>如图 4.2 所示，代码值为 0~0xB</li></ul><p><img src="../../../static/CSAPP/cp4/f4.3Function%20codes.png" alt=""></p><p>Y86-64 中的寄存器编号和 x86-64 相同，当需要指明不应访问任何寄存器时，就用 ID 值 0xF 来表示</p><p><img src="../../../static/CSAPP/cp4/f4.4register%20identifiers.png" alt=""></p><h2 id="Y86-64-异常">Y86-64 异常</h2><p><img src="../../../static/CSAPP/cp4/f4.5status%20codes.png" alt=""></p><h1 id="逻辑设计和硬件控制语言-HCL">逻辑设计和硬件控制语言 HCL</h1><h2 id="逻辑门">逻辑门</h2><p><img src="../../../static/CSAPP/cp4/f4.9logic%20gate.png" alt=""></p><h2 id="HCL">HCL</h2><p><img src="../../../static/CSAPP/cp4/min3.png" alt=""></p><p>用 HCL 来表达：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">word Min3 = [</span><br><span class="line">	A &lt;= B &amp;&amp; A &lt;= C : A;</span><br><span class="line">	B &lt;= A &amp;&amp; B &lt;= C : B;</span><br><span class="line">	1                : C;</span><br><span class="line">];</span><br></pre></td></tr></table></figure><h2 id="ALU">ALU</h2><p><img src="../../../static/CSAPP/cp4/f4.5ALU.png" alt=""></p><h2 id="存储器和时钟">存储器和时钟</h2><p><img src="../../../static/CSAPP/cp4/f4.16Register%20operation.png" alt=""></p><ul><li>寄存器操作</li><li>寄存器输出会一直保持在当前寄存器状态上，直到时钟信号上升</li><li>当时钟上升时，寄存器输入上的值会成为新的寄存器状态</li></ul><p><img src="../../../static/CSAPP/cp4/register%20file.png" alt=""></p><ul><li>读端口：A 和 B 写端口：W</li><li>这样一个多端口随机访问存储器允许同时进行多个读和写操作</li><li>当 srcA 或 srcB 被设置成某个寄存器 ID 时，在一段延迟之后，寄存器中的值就会出现在 valA 或 valB 上<ul><li>例如：srcA = 3，就会读出 <code>%rbx</code> 的值，然后出现在输出 valA 上</li></ul></li><li>每次时钟上升时，输入 valW 上的值会被写入输入 dstW 上的寄存器 ID 指示的程序寄存器<ul><li>当 dstW 设为特殊 ID 值为 0xF 时，不会写入</li></ul></li></ul><h1 id="Y86-64-的顺序实现">Y86-64 的顺序实现</h1><h2 id="将处理器组织成阶段">将处理器组织成阶段</h2><ol><li>fetch：从内存读取指令字节，地址为程序计数器 (PC) 的值。有两个四字节部分：icode 和 ifun。它可能取出一个寄存器指示符字节，指明一个或两个寄存器操作数指示符 rA 和 rB。它还可能取出一个 8 字节常数字 valC。也就是说，valP 等于 PC 的值加上已取出指令的长度。</li><li>decode：从寄存器文件读入最多两个操作数，得到值 valA 和/或 valB。通常它读入指令 rA 和 rB 字段指明的寄存器，不过有些指令是读寄存器 <code>%rsp</code> 的。</li><li>execute：算术逻辑单元要么执行指令指明的操作（根据 ifun 的值），计算内存引用的有效地址，要么增加或减少栈指针。得到的值称为 valE。在此，也可能设置条件码，对一条条件传送指令来说，这个阶段会检查条件码和传送条件（由 ifun 给出），如果条件成立，则更新目标寄存器。同样，对一条跳转指令来说，这个阶段会决定是不是应该选择分支。</li><li>memory：可以将数据写入内存，或者从内存读出数据。读出的值为 valM</li><li>Write back：最多可以写两个结果到寄存器文件</li><li>PC update： 将 PC 设置成下一条指令的地址</li></ol><p>处理器无限循环执行这些阶段。发生任何异常时，处理器就会停止：执行 halt 指令或非法指令，或它试图读或写非法地址。在更完整的个设计中，处理器会进入异常处理模式，开始执行由异常的类型决定的特殊代码。</p><p><img src="../../../static/CSAPP/cp4/f4.18computations.png" alt=""></p><ul><li>icode:ifun 表明指令字节的两个组成部分</li><li>rA:rB 表明寄存器指示符字节的两个组成部分</li><li>M1[x] 表示访问(读或写)内存位置 x 处的一个字节，而 M8[x] 表示访问八个字节</li></ul><p><img src="../../../static/CSAPP/cp4/f4.19rmmovq%20mrmovq.png" alt=""></p><p><img src="../../../static/CSAPP/cp4/f4.20pushq%20popq.png" alt=""></p><p><img src="../../../static/CSAPP/cp4/f4.21jxx%20call%20ret.png" alt=""></p><h2 id="SEQ">SEQ</h2><p>SEQ 是能执行 fetch, decode, execute, memory, write back, and PC update 这些计算的硬件结构的抽象表示</p><h3 id="硬件结构">硬件结构</h3><p><img src="../../../static/CSAPP/cp4/f4.22SEQ1.png" alt=""></p><p>SEQ 的抽象视图，一种顺序实现</p><p><img src="../../../static/CSAPP/cp4/f4.23SEQ2.png" alt=""></p><ul><li>白色方框表示时钟寄存器。PC 是 SEQ 中唯一的时钟寄存器</li><li>浅蓝色方框表示硬件单元。不必关心它们的细节设计</li><li>线路名字在白色圆圈中说明</li><li>宽度为字长的数据连接用中等粗度的线表示。每条这样的线实际上都代表一簇 64 根线并列连在一起将数据传送到硬件的另一部分</li><li>宽度为字节或更窄的数据连接用细线表示。根据线上要携带的值的类型，实际上都代表一簇 4 根或 8 根线</li><li>单个位的连接用虚线表示。代表芯片上单元与块之间传递的控制值</li></ul><p><img src="../../../static/CSAPP/cp4/f4.24.png" alt=""></p><h3 id="时序">时序</h3><p><strong>从不回读</strong>：Y86-64 指令集的原则，处理器从来不需要为了完成一条指令的执行而去读由该指令更新了的状态</p><p>SEQ 的实现包括组合逻辑和两种存储设备：</p><ul><li>组合逻辑不需要任何时序或控制，只要输入变化了，值就通过逻辑门网络传播</li><li>时钟寄存器：程序计数器和条件码寄存器</li><li>随机访问存储器：寄存器文件、指令内存和数据内存</li></ul><p>有四个单元需要对它们的时序进行明确的控制：程序计数器、条件码寄存器、数据内存和寄存器文件</p><ul><li>它们都通过一个时钟信号来控制，它触发将新值装载到寄存器以及将值写到随机访问寄存器</li><li>每个时钟周期，程序计数器都会装载新的指令地址</li><li>只有执行整数运算指令时，才会写数据内存</li><li>寄存器文件的两个写端口允许每个时钟周期更新两个程序寄存器，不过我们可以用特殊的寄存器 ID 0xF 作为端口地址，来表明在此端口不应该执行写操作</li></ul><h4 id="例子">例子</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1	0x000:	irmovq $0x100, %rbx	   # %rbx &lt;-- 0x100</span><br><span class="line">2	0x00a:	irmovq $0x200,%rdx	   # %rdx &lt;-- 0x200</span><br><span class="line">3	0x014:	addq %rdx, %rbx	       # %rbx &lt;-- 0x300 CC &lt;-- 000</span><br><span class="line">4	0x016:	je dest	               # Not taken</span><br><span class="line">5	0x0lf:	rmmovq %rbx,0(%rdx)	   # M[0x200] &lt;-- 0x300</span><br><span class="line">6	0x029:	dest: halt</span><br></pre></td></tr></table></figure><p><img src="../../../static/CSAPP/cp4/f4.25SEQ3.png" alt=""></p><h3 id="SEQ阶段的实现">SEQ阶段的实现</h3><p><img src="../../../static/CSAPP/cp4/f4.26HCL%20values.png" alt=""></p><h4 id="fetch-阶段">fetch 阶段</h4><p><img src="../../../static/CSAPP/cp4/f4.27SEQ%20fetch.png" alt=""></p><p>根据 icode 值可以计算三个一位的信号：</p><ul><li>instr_valid：这个字节对应于一个合法的 Y86-64 指令吗？这个信号用来发现不合法的指令</li><li>need_regids：这个指令包括一个寄存器指示符字节吗？</li><li>need_valC：这个指令包括一个常数字吗？</li><li>(当指令地址越界时会产生的)信号 instr_valid 和 imem_error 在访存阶段被用来产生状态码</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bool need_regids =</span><br><span class="line">	icode in &#123; IRRMOVQ, IOPQ, IPUSHQ, IPOPQ, IIRMOVQ, IRMMOVQ, IMRMOVQ &#125;;</span><br><span class="line"></span><br><span class="line">bool need_valC =</span><br><span class="line">	icode in &#123; IIRMOVQ, IRMMOVQ, IMRMOVQ, IJXX, ICALL &#125;;</span><br></pre></td></tr></table></figure><p>Align 对剩下 9 个字节的处理：</p><ul><li>当计算出来的信号 need_regids 为 1 时，字节 1 被分开装入寄存器指示符 rA 和 rB 中<ul><li>否则，这两个字段会被设为 0xF (RNONE) 表明这条指令没有指明寄存器</li><li>因此，可以将信号 rA 和 rB 看成，要么放着我们想要访问的寄存器，要么表明不需要访问任何寄存器</li></ul></li><li>根据 need_valC 的值，要么根据字节 1~8 来产生 valC ，要么根据字节 2~9 产生</li><li>PC 增加器硬件单元根据当前的 PC 以及以上两个信号的值产生 valP<ul><li>PC 值为 p、need_regids 值 r 以及 need_valC 值 i</li><li>增加器产生值  p + 1 + r + 8i</li></ul></li></ul><h4 id="Decode-和-Write-Back-阶段">Decode 和 Write-Back 阶段</h4><p><img src="../../../static/CSAPP/cp4/f4.28SEQ%20decode%20write-back.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">word srcA = [</span><br><span class="line">		icode in &#123; IRRMOVQ, IRMMOVQ, IOPQ, IPUSHQ &#125; : rA;</span><br><span class="line">		icode in &#123; IPOPQ, IRET &#125; : RRSP; </span><br><span class="line">		1 : RNONE; # Don&#x27;t need register</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">word srcB = [</span><br><span class="line">		icode in &#123; IRMMOVQ, IOPQ, IMRMOVQ &#125; : rB;</span><br><span class="line">		icode in &#123; IPOPQ, IPUSHQ, IRET, ICALL &#125; : RRSP; </span><br><span class="line">		1 : RNONE; # Don&#x27;t need register</span><br><span class="line">];</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># WARNING: Conditional move not implemented correctly here word</span><br><span class="line">dstE = [</span><br><span class="line">	icode in &#123; IRRMOVQ &#125; : rB;</span><br><span class="line">	icode in &#123; IIRMOVQ, IOPQ&#125; : rB;</span><br><span class="line">	icode in &#123; IPUSHQ, IPOPQ, ICALL, IRET &#125; : RRSP;</span><br><span class="line">	1 : RNONE; # Don&#x27;t write any register</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">dstM = [</span><br><span class="line">	icode in &#123; IMRMOVQ, IPOPQ &#125; : rA;</span><br><span class="line">	1 : RNONE; # Don&#x27;t write any register</span><br><span class="line">];</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="Execute-阶段">Execute 阶段</h4><p><img src="../../../static/CSAPP/cp4/f4.29SEQ%20execute.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">word aluA = [</span><br><span class="line">	icode in &#123; IRRMOVQ, IOPQ &#125; : valA;</span><br><span class="line">	icode in &#123; IIRMOVQ, IRMMOVQ, IMRMOVQ &#125; : valC;</span><br><span class="line">	icode in &#123; ICALL, IPUSHQ &#125; : -8;</span><br><span class="line">	icode in &#123; IRET, IPOPQ &#125; : 8;</span><br><span class="line">	# Other instructions don&#x27;t need ALU</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">word aluB = [</span><br><span class="line">	icode in &#123; IRMMOVQ, IMRMOVQ, IOPQ, ICALL, IPUSHQ, IRET, IPOPQ &#125; : valB;</span><br><span class="line">	icode in &#123; IRRMOVQ, IIRMOVQ &#125; : 0;</span><br><span class="line">	# Other instructions don&#x27;t need ALU</span><br><span class="line">];</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">word alufun = [</span><br><span class="line">	icode == IOPQ : ifun;</span><br><span class="line">	1 : ALUADD;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">bool set_cc = icode in &#123; IOPQ &#125;;</span><br></pre></td></tr></table></figure><h4 id="Memory-阶段">Memory 阶段</h4><p><img src="../../../static/CSAPP/cp4/f4.30SEQ%20memory.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">word mem_addr = [</span><br><span class="line">	icode in &#123; IRMMOVQ, IPUSHQ, ICALL, IMRMOVQ &#125; : valE;</span><br><span class="line">	icode in &#123; IPOPQ, IRET &#125; : valA;</span><br><span class="line">	# Other instructions don&#x27;t need address</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">word mem_data = [</span><br><span class="line">	# Value from register</span><br><span class="line">	icode in &#123; IRMMOVQ, IPUSHQ &#125; : valA;</span><br><span class="line">	# Return PC</span><br><span class="line">	icode == ICALL : valP;</span><br><span class="line">	# Default: Don&#x27;t write anything</span><br><span class="line">];</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bool mem_write = icode in &#123; IRMMOVQ, IPUSHQ, ICALL &#125;;</span><br><span class="line">bool mem_read = icode in &#123; IMRMOVQ, IPOPQ, IRET &#125;;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">## Determine instruction status</span><br><span class="line">word Stat = [</span><br><span class="line">	imem_error | | dmem_error : SADR;</span><br><span class="line">	!instr_valid: SINS;</span><br><span class="line">	icode == IHALT : SHLT;</span><br><span class="line">	1 : SAOK;</span><br><span class="line">];</span><br></pre></td></tr></table></figure><h4 id="PC-Update-阶段">PC Update 阶段</h4><p><img src="../../../static/CSAPP/cp4/f4.31SEQ%20PC%20update.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">word new_pc = [</span><br><span class="line">	# Call. Use instruction constant </span><br><span class="line">	icode == ICALL : valC;</span><br><span class="line">	# Taken branch. Use instruction constant </span><br><span class="line">	icode == IJXX &amp;&amp; Cnd : valC;</span><br><span class="line">	# Completion of RET instruction. Use value from stack </span><br><span class="line">	icode == IRET : valM;</span><br><span class="line">	# Default: Use incremented PC </span><br><span class="line">	1 : valP;</span><br><span class="line">];</span><br></pre></td></tr></table></figure></div><div class="article-licensing box"><div class="licensing-title"><p>cp4 处理器体系结构</p><p><a href="https://tomatoblog.netlify.app/Study/csapp/cp4/">https://tomatoblog.netlify.app/Study/csapp/cp4/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>TOMATO</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2023-05-24</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2023-06-22</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY 4.0" href="https://creativecommons.org/licenses/by/4.0/deed.zh">CC BY 4.0</a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/csapp/">csapp</a></div></article></div><div class="card"><nav class="post-navigation mt-4 level is-mobile card-content"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/Study/csapp/cp5/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">cp5 优化程序性能</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/Study/bookNote/%E5%A8%B1%E4%B9%90%E8%87%B3%E6%AD%BB/"><span class="level-item">娱乐至死</span><i class="level-item fas fa-chevron-right"></i></a></div></nav></div></div><style>.column.column-left,.column.column-right{display:none}</style><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/static/avatar.jpg" alt="ToMaTo"></figure><p class="title is-size-4 is-block" style="line-height:inherit">ToMaTo</p><p class="is-size-6 is-block">Back-end Developer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>GuangZhou, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">59</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">29</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/dontSerious/" target="_blank" rel="noopener" id="widget-follow">Github</a></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/04/"><span class="level-start"><span class="level-item">2024年04月</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/03/"><span class="level-start"><span class="level-item">2024年03月</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/02/"><span class="level-start"><span class="level-item">2024年02月</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/12/"><span class="level-start"><span class="level-item">2023年12月</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/11/"><span class="level-start"><span class="level-item">2023年11月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/10/"><span class="level-start"><span class="level-item">2023年10月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/09/"><span class="level-start"><span class="level-item">2023年09月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/08/"><span class="level-start"><span class="level-item">2023年08月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/06/"><span class="level-start"><span class="level-item">2023年06月</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/05/"><span class="level-start"><span class="level-item">2023年05月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/04/"><span class="level-start"><span class="level-item">2023年04月</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/03/"><span class="level-start"><span class="level-item">2023年03月</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/02/"><span class="level-start"><span class="level-item">2023年02月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time datetime="2024-04-28T10:24:18.000Z">2024-04-28</time></p><p class="title"><a href="/FrontEnd/Flutter/">flutter 笔记</a></p><p class="categories"><a href="/categories/FrontEnd/">FrontEnd</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2024-03-26T06:43:15.000Z">2024-03-26</time></p><p class="title"><a href="/Interview/go/">go面试</a></p><p class="categories"><a href="/categories/Interview/">Interview</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2024-03-26T02:10:11.000Z">2024-03-26</time></p><p class="title"><a href="/Interview/datastruct/">数据结构和算法面试</a></p><p class="categories"><a href="/categories/Interview/">Interview</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2024-03-26T02:10:11.000Z">2024-03-26</time></p><p class="title"><a href="/Interview/distributed/">分布式面试</a></p><p class="categories"><a href="/categories/Interview/">Interview</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2024-03-16T07:28:10.000Z">2024-03-16</time></p><p class="title"><a href="/BackEnd/sql/index/">SQL 索引</a></p><p class="categories"><a href="/categories/BackEnd/">BackEnd</a></p></div></article></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Y86-64-指令集体系结构"><span class="level-left"><span class="level-item">1</span><span class="level-item">Y86-64 指令集体系结构</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#程序员可见状态"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">程序员可见状态</span></span></a></li><li><a class="level is-mobile" href="#Y86-64-指令"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">Y86-64 指令</span></span></a></li><li><a class="level is-mobile" href="#指令编码"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">指令编码</span></span></a></li><li><a class="level is-mobile" href="#Y86-64-异常"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">Y86-64 异常</span></span></a></li></ul></li><li><a class="level is-mobile" href="#逻辑设计和硬件控制语言-HCL"><span class="level-left"><span class="level-item">2</span><span class="level-item">逻辑设计和硬件控制语言 HCL</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#逻辑门"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">逻辑门</span></span></a></li><li><a class="level is-mobile" href="#HCL"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">HCL</span></span></a></li><li><a class="level is-mobile" href="#ALU"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">ALU</span></span></a></li><li><a class="level is-mobile" href="#存储器和时钟"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">存储器和时钟</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Y86-64-的顺序实现"><span class="level-left"><span class="level-item">3</span><span class="level-item">Y86-64 的顺序实现</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#将处理器组织成阶段"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">将处理器组织成阶段</span></span></a></li><li><a class="level is-mobile" href="#SEQ"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">SEQ</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#硬件结构"><span class="level-left"><span class="level-item">3.2.1</span><span class="level-item">硬件结构</span></span></a></li><li><a class="level is-mobile" href="#时序"><span class="level-left"><span class="level-item">3.2.2</span><span class="level-item">时序</span></span></a></li><li><a class="level is-mobile" href="#SEQ阶段的实现"><span class="level-left"><span class="level-item">3.2.3</span><span class="level-item">SEQ阶段的实现</span></span></a></li></ul></li></ul></li></ul></div></div><style>#toc .menu-list>li>a.is-active+.menu-list{display:block}#toc .menu-list>li>a+.menu-list{display:none}</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/BackEnd/"><span class="level-start"><span class="level-item">BackEnd</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/categories/FrontEnd/"><span class="level-start"><span class="level-item">FrontEnd</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Interview/"><span class="level-start"><span class="level-item">Interview</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Memo/"><span class="level-start"><span class="level-item">Memo</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/Project/"><span class="level-start"><span class="level-item">Project</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Study/"><span class="level-start"><span class="level-item">Study</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/categories/Tutorial/"><span class="level-start"><span class="level-item">Tutorial</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Flutter/"><span class="tag">Flutter</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MIT6-S081/"><span class="tag">MIT6.S081</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/React/"><span class="tag">React</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TypeScript/"><span class="tag">TypeScript</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vue-js/"><span class="tag">Vue.js</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bookNote/"><span class="tag">bookNote</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/career/"><span class="tag">career</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cpp/"><span class="tag">cpp</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cs/"><span class="tag">cs</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csapp/"><span class="tag">csapp</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/curriculum/"><span class="tag">curriculum</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dataStruct/"><span class="tag">dataStruct</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/datastruct/"><span class="tag">datastruct</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/distributed/"><span class="tag">distributed</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/go/"><span class="tag">go</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/live/"><span class="tag">live</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/log/"><span class="tag">log</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/memo/"><span class="tag">memo</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/network/"><span class="tag">network</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nodejs/"><span class="tag">nodejs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/obsidian/"><span class="tag">obsidian</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/project/"><span class="tag">project</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/psychology/"><span class="tag">psychology</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/simpleBank/"><span class="tag">simpleBank</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sql/"><span class="tag">sql</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tools/"><span class="tag">tools</span><span class="tag">10</span></a></div></div></div></div></div></div><style>.column.column-left,.column.column-right{display:block}</style></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img class="logo-img" src="/static/avatar.jpg" alt="Tomato&#039;s Blog" height="28"><img class="logo-img-dark" src="/static/avatar.jpg" alt="Tomato&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2024 TOMATO</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/imaegoo/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/deed.zh"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="/js/imaegoo/jquery/3.3.1/dist/jquery.min.js"></script><script src="/js/imaegoo/moment/2.22.2/min/moment-with-locales.min.js"></script><script src="/js/imaegoo/clipboard/2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn")</script><script>var IcarusThemeSettings={article:{highlight:{clipboard:!0,fold:"unfolded"}}}</script><script src="/js/column.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="/js/imaegoo/cookieconsent/3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-right",
        content: {
          message: "此网站使用 Cookie，以启用评论系统和分析功能。",
          dismiss: "知道了",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="/js/imaegoo/lightgallery/1.10.0/dist/js/lightgallery.min.js" defer></script><script src="/js/imaegoo/justifiedGallery/3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><div class="searchbox-pinyin"><label class="checkbox"><input id="search-by-pinyin" type="checkbox" checked><span> 拼音检索</span></label></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/imaegoo/pinyin.js" defer></script><script src="/js/insight.js" defer></script><script>document.addEventListener("DOMContentLoaded",function(){loadInsight({contentUrl:"/content.json"},{hint:"想要查找什么...",untitled:"(无标题)",posts:"文章",pages:"页面",categories:"分类",tags:"标签"})})</script><script type="text/javascript" src="/js/imaegoo/imaegoo.js"></script><script type="text/javascript" src="/js/imaegoo/universe.js"></script></body></html>