<!doctype html><html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta><title>Bash脚本编程 - Tomato&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Tomato&#039;s Blog"><meta name="msapplication-TileImage" content="static/avatar.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Tomato&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="基础 创建 1touch hello.sh hello.sh 12#!&amp;#x2F;bin&amp;#x2F;bashecho &amp;quot;Hello World&amp;quot; 执行 1234bash hello.shchmod u+x hello.sh.&amp;#x2F;hello.sh 变量 1234#!&amp;#x2F;bin&amp;#x2F;bashvar&amp;#x3D;valueecho $var 传递参数变量 1.&amp;#x2F;my_script.sh arg1 arg2 在脚本中，你可以"><meta property="og:type" content="article"><meta property="og:title" content="Bash脚本编程"><meta property="og:url" content="https://tomatoblog.netlify.app/Tutorial/Bash%20script/"><meta property="og:site_name" content="Tomato&#039;s Blog"><meta property="og:description" content="基础 创建 1touch hello.sh hello.sh 12#!&amp;#x2F;bin&amp;#x2F;bashecho &amp;quot;Hello World&amp;quot; 执行 1234bash hello.shchmod u+x hello.sh.&amp;#x2F;hello.sh 变量 1234#!&amp;#x2F;bin&amp;#x2F;bashvar&amp;#x3D;valueecho $var 传递参数变量 1.&amp;#x2F;my_script.sh arg1 arg2 在脚本中，你可以"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://tomatoblog.netlify.app/img/og_image.png"><meta property="article:published_time" content="2023-12-31T09:32:00.000Z"><meta property="article:modified_time" content="2023-12-31T09:32:01.000Z"><meta property="article:author" content="TOMATO"><meta property="article:tag" content="Bash"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://tomatoblog.netlify.app/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://tomatoblog.netlify.app/Tutorial/Bash%20script/"},"headline":"Bash脚本编程","image":["https://tomatoblog.netlify.app/img/og_image.png"],"datePublished":"2023-12-31T09:32:00.000Z","dateModified":"2023-12-31T09:32:01.000Z","author":{"@type":"Person","name":"TOMATO"},"publisher":{"@type":"Organization","name":"Tomato's Blog","logo":{"@type":"ImageObject","url":{"light":"static/avatar.jpg","dark":"static/avatar.jpg"}}},"description":"基础 创建 1touch hello.sh hello.sh 12#!&#x2F;bin&#x2F;bashecho &quot;Hello World&quot; 执行 1234bash hello.shchmod u+x hello.sh.&#x2F;hello.sh 变量 1234#!&#x2F;bin&#x2F;bashvar&#x3D;valueecho $var 传递参数变量 1.&#x2F;my_script.sh arg1 arg2 在脚本中，你可以"}</script><link rel="canonical" href="https://tomatoblog.netlify.app/Tutorial/Bash%20script/"><link rel="icon" href="/static/avatar.jpg"><link rel="stylesheet" href="/css/font/fontawesome/css/all.min.css"><link rel="stylesheet" href="/js/imaegoo/highlight.js/11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="/css/default.css"><link rel="stylesheet" href="/js/imaegoo/cookieconsent/3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="/js/imaegoo/lightgallery/1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="/js/imaegoo/justifiedGallery/3.8.1/dist/css/justifiedGallery.min.css"><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="/js/imaegoo/pace-js/1.2.4/pace.min.js"></script><script>(function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();</script><meta name="generator" content="Hexo 7.1.1"></head><body class="is-3-column"><script type="text/javascript" src="/js/imaegoo/night.js"></script><canvas id="universe"></canvas><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img class="logo-img" src="/static/avatar.jpg" alt="Tomato&#039;s Blog" height="28"><img class="logo-img-dark" src="/static/avatar.jpg" alt="Tomato&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives/">时间轴</a><a class="navbar-item" href="/categories/">分类</a><a class="navbar-item" href="/tags/">标签</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i><span>  目录</span></a><a class="navbar-item night" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2023-12-31T09:32:00.000Z" title="12/31/2023, 9:32:00 AM">2023-12-31</time>发表</span><span class="level-item"><time datetime="2023-12-31T09:32:01.000Z" title="12/31/2023, 9:32:01 AM">2023-12-31</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Tutorial/">Tutorial</a></span><span class="level-item">42 分钟读完 (大约6287个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">Bash脚本编程</h1><div class="content"><h1 id="基础">基础</h1><h2 id="创建">创建</h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch hello.sh</span><br></pre></td></tr></table></figure><p><a target="_blank" rel="noopener" href="http://hello.sh">hello.sh</a></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Hello World&quot;</span></span><br></pre></td></tr></table></figure><h3 id="执行">执行</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bash hello.sh</span><br><span class="line"></span><br><span class="line">chmod u+x hello.sh</span><br><span class="line">./hello.sh</span><br></pre></td></tr></table></figure><h2 id="变量">变量</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">var=value</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span></span><br></pre></td></tr></table></figure><h2 id="传递参数变量">传递参数变量</h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./my_script.sh arg1 arg2</span><br></pre></td></tr></table></figure><p>在脚本中，你可以使用 <code>$1</code> 来代表第 1 个参数，用 <code>$2</code> 来代表第 2 个参数，以此类推。<code>$0</code> 是一个特殊变量，它代表正在运行的脚本的名字。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Script name is: <span class="variable">$0</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;First argument is: <span class="variable">$1</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Second argument is: <span class="variable">$2</span>&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./argument.sh abhishek prakash</span><br><span class="line">Script name is: ./argument.sh</span><br><span class="line">First argument is: abhishek</span><br><span class="line">Second argument is: prakash</span><br></pre></td></tr></table></figure><h3 id="特殊变量">特殊变量</h3><table><thead><tr><th>特殊变量</th><th>描述</th></tr></thead><tbody><tr><td><code>$0</code></td><td>脚本名称</td></tr><tr><td><code>$1</code>、<code>$2</code>… <code>$9</code></td><td>脚本参数</td></tr><tr><td><code>$&#123;n&#125;</code></td><td>10 到 255 的脚本参数</td></tr><tr><td><code>$#</code></td><td>参数数量</td></tr><tr><td><code>$@</code></td><td>所有参数一起</td></tr><tr><td><code>$$</code></td><td>当前 shell 的进程 id</td></tr><tr><td><code>$!</code></td><td>最后执行命令的进程 id</td></tr><tr><td><code>$?</code></td><td>最后执行命令的退出状态</td></tr></tbody></table><h3 id="read">read</h3><p>可以使用 <code>read -p</code> 命令提示用户进行键盘输入，而不需要 <code>echo</code> 命令。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;What is your name, stranger?&quot;</span></span><br><span class="line"><span class="built_in">read</span> name</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;What&#x27;s your full name, <span class="variable">$name</span>? &quot;</span> full_name</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Welcome, <span class="variable">$full_name</span>&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./argument.sh</span></span><br><span class="line">What is your name, stranger?</span><br><span class="line">abhishek</span><br><span class="line">What&#x27;s your full name, abhishek? abhishek prakash</span><br><span class="line">Welcome, abhishek prakash</span><br></pre></td></tr></table></figure><h2 id="执行算术运算">执行算术运算</h2><p>语法</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">((arithmetic_operation))</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>操作符</th><th>描述</th></tr></thead><tbody><tr><td><code>+</code></td><td>加法</td></tr><tr><td><code>-</code></td><td>减法</td></tr><tr><td><code>*</code></td><td>乘法</td></tr><tr><td><code>/</code></td><td>整数除法（没有小数）</td></tr><tr><td><code>%</code></td><td>模运算（只余）</td></tr><tr><td><code>**</code></td><td>指数（a 的 b 次方）</td></tr></tbody></table><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;Enter first number: &quot;</span> num1</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;Enter second number: &quot;</span> num2</span><br><span class="line"><span class="built_in">sum</span>=$((<span class="variable">$num1</span>+<span class="variable">$num2</span>))</span><br><span class="line">sub=$((<span class="variable">$num1</span>-<span class="variable">$num2</span>))</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;The summation of <span class="variable">$num1</span> and <span class="variable">$num2</span> is <span class="variable">$sum</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;The substraction of <span class="variable">$num2</span> from <span class="variable">$num1</span> is <span class="variable">$sub</span>&quot;</span></span><br></pre></td></tr></table></figure><h3 id="浮点运算-bc">浮点运算 bc</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">num1=50</span><br><span class="line">num2=6</span><br><span class="line">result=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$num1</span>/<span class="variable">$num2</span>&quot;</span> | bc -l)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;The result is <span class="variable">$result</span>&quot;</span></span><br></pre></td></tr></table></figure><h2 id="数组">数组</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">distros=(Ubuntu Fedora SUSE <span class="string">&quot;Arch Linux&quot;</span> Nix)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 访问</span></span><br><span class="line"><span class="variable">$&#123;array_name[N]&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示所有元素</span></span><br><span class="line"><span class="variable">$&#123;array[*]&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取数组长度</span></span><br><span class="line"><span class="variable">$&#123;#array_name[@]&#125;</span></span><br></pre></td></tr></table></figure><h2 id="字符串">字符串</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取字符串长度</span></span><br><span class="line"><span class="variable">$&#123;#string&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接字符串</span></span><br><span class="line">str3=$str1<span class="variable">$str2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提取子串</span></span><br><span class="line"><span class="variable">$&#123;string:$pos:$len&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 替换</span></span><br><span class="line"><span class="variable">$&#123;string/substr1/substr2&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除字串</span></span><br><span class="line"><span class="variable">$&#123;string/substring&#125;</span></span><br></pre></td></tr></table></figure><h2 id="条件语句">条件语句</h2><p>注意使用 <code>[ ... ];</code> 和 <code>then</code> 。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># if</span></span><br><span class="line"><span class="keyword">if</span> [ condition ]; <span class="keyword">then</span></span><br><span class="line">  <span class="comment"># code </span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># if-else</span></span><br><span class="line"><span class="keyword">if</span> [ expression ]; <span class="keyword">then</span></span><br><span class="line">    <span class="comment">## execute this block if condition is true else go to next</span></span><br><span class="line"><span class="keyword">elif</span> [ expression ]; <span class="keyword">then</span></span><br><span class="line">    <span class="comment">## execute this block if condition is true else go to next</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="comment">## if none of the above conditions are true, execute this block</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><h3 id="eq">-eq</h3><h4 id="数值比较">数值比较</h4><table><thead><tr><th>条件</th><th>当…时，等同于 true</th></tr></thead><tbody><tr><td><code>$a -lt $b</code></td><td><code>$a &lt; $b</code> （<code>$a</code> 是小于 <code>$b</code>）</td></tr><tr><td><code>$a -gt $b</code></td><td><code>$a &gt; $b</code> （<code>$a</code> 是大于 <code>$b</code>）</td></tr><tr><td><code>$a -le $b</code></td><td><code>$a &lt;= $b</code> （<code>$a</code> 是小于或等于 <code>$b</code>）</td></tr><tr><td><code>$a -ge $b</code></td><td><code>$a &gt;= $b</code> （<code>$a</code> 是大于或等于 <code>$b</code>）</td></tr><tr><td><code>$a -eq $b</code></td><td><code>$a == $b</code> （<code>$a</code> 等于 <code>$b</code>）</td></tr><tr><td><code>$a -ne $b</code></td><td><code>$a != $b</code> （<code>$a</code> 不等于 <code>$b</code>）</td></tr></tbody></table><h4 id="字符串比较">字符串比较</h4><table><thead><tr><th>条件</th><th>当…时，等同于 true</th></tr></thead><tbody><tr><td><code>&quot;$a&quot; = &quot;$b&quot;</code></td><td><code>$a</code> 等同于 <code>$b</code></td></tr><tr><td><code>&quot;$a&quot; == &quot;$b&quot;</code></td><td><code>$a</code> 等同于 <code>$b</code></td></tr><tr><td><code>&quot;$a&quot; != &quot;$b&quot;</code></td><td><code>$a</code> 不同于 <code>$b</code></td></tr><tr><td><code>-z &quot;$a&quot;</code></td><td><code>$a</code> 是空的</td></tr></tbody></table><h4 id="检查文件类型">检查文件类型</h4><table><thead><tr><th>条件</th><th>当…时，等同于 true</th></tr></thead><tbody><tr><td><code>-f $a</code></td><td><code>$a</code> 是一个文件</td></tr><tr><td><code>-d $a</code></td><td><code>$a</code> 是一个目录</td></tr><tr><td><code>-L $a</code></td><td><code>$a</code> 是一个链接</td></tr></tbody></table><p><strong>要特别注意空格。开括号和闭括号、条件之间必须有空格。同样地，条件操作符（<code>-le</code>、<code>==</code> 等）之前和之后必须有空格。</strong></p><h2 id="循环">循环</h2><h3 id="For">For</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> &#123;1..10&#125;; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$num</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h3 id="While">While</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">num=1</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$num</span> -le 10 ]; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$num</span></span><br><span class="line">    num=$((<span class="variable">$num</span>+<span class="number">1</span>))</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h3 id="Until">Until</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">num=1</span><br><span class="line"><span class="keyword">until</span> [ <span class="variable">$num</span> -gt 10 ]; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$num</span></span><br><span class="line">    num=$((<span class="variable">$num</span>+<span class="number">1</span>))</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p><strong><code>while</code> 循环在条件为真时运行，而 <code>until</code> 循环在条件为假时运行。</strong></p><h2 id="函数">函数</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">function_name</span></span>() &#123;</span><br><span class="line">  commands</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="function"><span class="title">sum</span></span>() &#123;</span><br><span class="line">    <span class="built_in">sum</span>=$((<span class="variable">$1</span>+<span class="variable">$2</span>))</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;The sum of <span class="variable">$1</span> and <span class="variable">$2</span> is: <span class="variable">$sum</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Let&#x27;s use the sum function&quot;</span></span><br><span class="line"><span class="built_in">sum</span> 1 5</span><br></pre></td></tr></table></figure><h1 id="Bash-的模式扩展">Bash 的模式扩展</h1><h2 id="简介">简介</h2><p>Shell 接收到用户输入的命令以后，会根据空格将用户的输入，拆分成一个个词元（token）。然后，Shell 会扩展词元里面的特殊字符，扩展完成后才会调用相应的命令。</p><p>这种特殊字符的扩展，称为模式扩展（globbing）。其中有些用到通配符，又称为通配符扩展（wildcard expansion）。Bash 一共提供八种扩展。</p><ul><li>波浪线扩展</li><li><code>?</code> 字符扩展</li><li><code>*</code> 字符扩展</li><li>方括号扩展</li><li>大括号扩展</li><li>变量扩展</li><li>子命令扩展</li><li>算术扩展</li></ul><p>本章介绍这八种扩展。</p><p>Bash 是先进行扩展，再执行命令。因此，扩展的结果是由 Bash 负责的，与所要执行的命令无关。命令本身并不存在参数扩展，收到什么参数就原样执行。这一点务必需要记住。</p><p>模块扩展的英文单词是<code>globbing</code>，这个词来自于早期的 Unix 系统有一个<code>/etc/glob</code>文件，保存扩展的模板。后来 Bash 内置了这个功能，但是这个名字就保留了下来。</p><p>模式扩展与正则表达式的关系是，模式扩展早于正则表达式出现，可以看作是原始的正则表达式。它的功能没有正则那么强大灵活，但是优点是简单和方便。</p><p>Bash 允许用户关闭扩展。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">set</span> -o <span class="built_in">noglob</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">$ <span class="built_in">set</span> -f</span><br></pre></td></tr></table></figure><p>下面的命令可以重新打开扩展。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">set</span> +o <span class="built_in">noglob</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">$ <span class="built_in">set</span> +f</span><br></pre></td></tr></table></figure><h2 id="波浪线扩展">波浪线扩展</h2><p>波浪线<code>~</code>会自动扩展成当前用户的主目录。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> ~</span><br><span class="line">/home/me</span><br></pre></td></tr></table></figure><p><code>~/dir</code>表示扩展成主目录的某个子目录，<code>dir</code>是主目录里面的一个子目录名。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入 /home/me/foo 目录</span></span><br><span class="line">$ <span class="built_in">cd</span> ~/foo</span><br></pre></td></tr></table></figure><p><code>~user</code>表示扩展成用户<code>user</code>的主目录。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> ~foo</span><br><span class="line">/home/foo</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> ~root</span><br><span class="line">/root</span><br></pre></td></tr></table></figure><p>上面例子中，Bash 会根据波浪号后面的用户名，返回该用户的主目录。</p><p>如果<code>~user</code>的<code>user</code>是不存在的用户名，则波浪号扩展不起作用。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> ~nonExistedUser</span><br><span class="line">~nonExistedUser</span><br></pre></td></tr></table></figure><p><code>~+</code>会扩展成当前所在的目录，等同于<code>pwd</code>命令。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/foo</span><br><span class="line">$ <span class="built_in">echo</span> ~+</span><br><span class="line">/home/me/foo</span><br></pre></td></tr></table></figure><h2 id="字符扩展"><code>?</code> 字符扩展</h2><p><code>?</code>字符代表文件路径里面的任意单个字符，不包括空字符。比如，<code>Data???</code>匹配所有<code>Data</code>后面跟着三个字符的文件名。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 存在文件 a.txt 和 b.txt</span></span><br><span class="line">$ <span class="built_in">ls</span> ?.txt</span><br><span class="line">a.txt b.txt</span><br></pre></td></tr></table></figure><p>上面命令中，<code>?</code>表示单个字符，所以会同时匹配<code>a.txt</code>和<code>b.txt</code>。</p><p>如果匹配多个字符，就需要多个<code>?</code>连用。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 存在文件 a.txt、b.txt 和 ab.txt</span></span><br><span class="line">$ <span class="built_in">ls</span> ??.txt</span><br><span class="line">ab.txt</span><br></pre></td></tr></table></figure><p>上面命令中，<code>??</code>匹配了两个字符。</p><p><code>?</code> 字符扩展属于文件名扩展，只有文件确实存在的前提下，才会发生扩展。如果文件不存在，扩展就不会发生。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当前目录有 a.txt 文件</span></span><br><span class="line">$ <span class="built_in">echo</span> ?.txt</span><br><span class="line">a.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当前目录为空目录</span></span><br><span class="line">$ <span class="built_in">echo</span> ?.txt</span><br><span class="line">?.txt</span><br></pre></td></tr></table></figure><p>上面例子中，如果<code>?.txt</code>可以扩展成文件名，<code>echo</code>命令会输出扩展后的结果；如果不能扩展成文件名，<code>echo</code>就会原样输出<code>?.txt</code>。</p><h2 id="字符扩展-v2"><code>*</code> 字符扩展</h2><p><code>*</code>字符代表文件路径里面的任意数量的任意字符，包括零个字符。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 存在文件 a.txt、b.txt 和 ab.txt</span></span><br><span class="line">$ <span class="built_in">ls</span> *.txt</span><br><span class="line">a.txt b.txt ab.txt</span><br></pre></td></tr></table></figure><p>上面例子中，<code>*.txt</code>代表后缀名为<code>.txt</code>的所有文件。</p><p>如果想输出当前目录的所有文件，直接用<code>*</code>即可。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> *</span><br></pre></td></tr></table></figure><p><code>*</code>可以匹配空字符，下面是一个例子。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 存在文件 a.txt、b.txt 和 ab.txt</span></span><br><span class="line">$ <span class="built_in">ls</span> a*.txt</span><br><span class="line">a.txt ab.txt</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">ls</span> *b*</span><br><span class="line">b.txt ab.txt</span><br></pre></td></tr></table></figure><p>注意，<code>*</code>不会匹配隐藏文件（以<code>.</code>开头的文件），即<code>ls *</code>不会输出隐藏文件。</p><p>如果要匹配隐藏文件，需要写成<code>.*</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示所有隐藏文件</span></span><br><span class="line">$ <span class="built_in">echo</span> .*</span><br></pre></td></tr></table></figure><p>如果要匹配隐藏文件，同时要排除<code>.</code>和<code>..</code>这两个特殊的隐藏文件，可以与方括号扩展结合使用，写成<code>.[!.]*</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> .[!.]*</span><br></pre></td></tr></table></figure><p>注意，<code>*</code>字符扩展属于文件名扩展，只有文件确实存在的前提下才会扩展。如果文件不存在，就会原样输出。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当前目录不存在 c 开头的文件</span></span><br><span class="line">$ <span class="built_in">echo</span> c*.txt</span><br><span class="line">c*.txt</span><br></pre></td></tr></table></figure><p>上面例子中，当前目录里面没有<code>c</code>开头的文件，导致<code>c*.txt</code>会原样输出。</p><p><code>*</code>只匹配当前目录，不会匹配子目录。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 子目录有一个 a.txt</span></span><br><span class="line"><span class="comment"># 无效的写法</span></span><br><span class="line">$ <span class="built_in">ls</span> *.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 有效的写法</span></span><br><span class="line">$ <span class="built_in">ls</span> */*.txt</span><br></pre></td></tr></table></figure><p>上面的例子，文本文件在子目录，<code>*.txt</code>不会产生匹配，必须写成<code>*/*.txt</code>。有几层子目录，就必须写几层星号。</p><p>Bash 4.0 引入了一个参数<code>globstar</code>，当该参数打开时，允许<code>**</code>匹配零个或多个子目录。因此，<code>**/*.txt</code>可以匹配顶层的文本文件和任意深度子目录的文本文件。详细介绍请看后面<code>shopt</code>命令的介绍。</p><h2 id="方括号扩展">方括号扩展</h2><p>方括号扩展的形式是<code>[...]</code>，只有文件确实存在的前提下才会扩展。如果文件不存在，就会原样输出。括号之中的任意一个字符。比如，<code>[aeiou]</code>可以匹配五个元音字母中的任意一个。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 存在文件 a.txt 和 b.txt</span></span><br><span class="line">$ <span class="built_in">ls</span> [ab].txt</span><br><span class="line">a.txt b.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只存在文件 a.txt</span></span><br><span class="line">$ <span class="built_in">ls</span> [ab].txt</span><br><span class="line">a.txt</span><br></pre></td></tr></table></figure><p>上面例子中，<code>[ab]</code>可以匹配<code>a</code>或<code>b</code>，前提是确实存在相应的文件。</p><p>方括号扩展属于文件名匹配，即扩展后的结果必须符合现有的文件路径。如果不存在匹配，就会保持原样，不进行扩展。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不存在文件 a.txt 和 b.txt</span></span><br><span class="line">$ <span class="built_in">ls</span> [ab].txt</span><br><span class="line"><span class="built_in">ls</span>: 无法访问<span class="string">&#x27;[ab].txt&#x27;</span>: 没有那个文件或目录</span><br></pre></td></tr></table></figure><p>上面例子中，由于扩展后的文件不存在，<code>[ab].txt</code>就原样输出了，导致<code>ls</code>命名报错。</p><p>方括号扩展还有两种变体：<code>[^...]</code>和<code>[!...]</code>。它们表示匹配不在方括号里面的字符，这两种写法是等价的。比如，<code>[^abc]</code>或<code>[!abc]</code>表示匹配除了<code>a</code>、<code>b</code>、<code>c</code>以外的字符。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 存在 aaa、bbb、aba 三个文件</span></span><br><span class="line">$ <span class="built_in">ls</span> ?[!a]?</span><br><span class="line">aba bbb</span><br></pre></td></tr></table></figure><p>上面命令中，<code>[!a]</code>表示文件名第二个字符不是<code>a</code>的文件名，所以返回了<code>aba</code>和<code>bbb</code>两个文件。</p><p>注意，如果需要匹配<code>[</code>字符，可以放在方括号内，比如<code>[[aeiou]</code>。如果需要匹配连字号<code>-</code>，只能放在方括号内部的开头或结尾，比如<code>[-aeiou]</code>或<code>[aeiou-]</code>。</p><h2 id="start-end-扩展">[start-end] 扩展</h2><p>方括号扩展有一个简写形式<code>[start-end]</code>，表示匹配一个连续的范围。比如，<code>[a-c]</code>等同于<code>[abc]</code>，<code>[0-9]</code>匹配<code>[0123456789]</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 存在文件 a.txt、b.txt 和 c.txt</span></span><br><span class="line">$ <span class="built_in">ls</span> [a-c].txt</span><br><span class="line">a.txt</span><br><span class="line">b.txt</span><br><span class="line">c.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 存在文件 report1.txt、report2.txt 和 report3.txt</span></span><br><span class="line">$ <span class="built_in">ls</span> report[0-9].txt</span><br><span class="line">report1.txt</span><br><span class="line">report2.txt</span><br><span class="line">report3.txt</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>下面是一些常用简写的例子。</p><ul><li><code>[a-z]</code>：所有小写字母。</li><li><code>[a-zA-Z]</code>：所有小写字母与大写字母。</li><li><code>[a-zA-Z0-9]</code>：所有小写字母、大写字母与数字。</li><li><code>[abc]*</code>：所有以<code>a</code>、<code>b</code>、<code>c</code>字符之一开头的文件名。</li><li><code>program.[co]</code>：文件<code>program.c</code>与文件<code>program.o</code>。</li><li><code>BACKUP.[0-9][0-9][0-9]</code>：所有以<code>BACKUP.</code>开头，后面是三个数字的文件名。</li></ul><p>这种简写形式有一个否定形式<code>[!start-end]</code>，表示匹配不属于这个范围的字符。比如，<code>[!a-zA-Z]</code>表示匹配非英文字母的字符。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> report[!1–3].txt</span><br><span class="line">report4.txt report5.txt</span><br></pre></td></tr></table></figure><p>上面代码中，<code>[!1-3]</code>表示排除1、2和3。</p><h2 id="大括号扩展">大括号扩展</h2><p>大括号扩展<code>&#123;...&#125;</code>表示分别扩展成大括号里面的所有值，各个值之间使用逗号分隔。比如，<code>&#123;1,2,3&#125;</code>扩展成<code>1 2 3</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> &#123;1,2,3&#125;</span><br><span class="line">1 2 3</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> d&#123;a,e,i,u,o&#125;g</span><br><span class="line">dag deg dig dug dog</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> Front-&#123;A,B,C&#125;-Back</span><br><span class="line">Front-A-Back Front-B-Back Front-C-Back</span><br></pre></td></tr></table></figure><p>注意，大括号扩展不是文件名扩展。它会扩展成所有给定的值，而不管是否有对应的文件存在。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> &#123;a,b,c&#125;.txt</span><br><span class="line"><span class="built_in">ls</span>: 无法访问<span class="string">&#x27;a.txt&#x27;</span>: 没有那个文件或目录</span><br><span class="line"><span class="built_in">ls</span>: 无法访问<span class="string">&#x27;b.txt&#x27;</span>: 没有那个文件或目录</span><br><span class="line"><span class="built_in">ls</span>: 无法访问<span class="string">&#x27;c.txt&#x27;</span>: 没有那个文件或目录</span><br></pre></td></tr></table></figure><p>上面例子中，即使不存在对应的文件，<code>&#123;a,b,c&#125;</code>依然扩展成三个文件名，导致<code>ls</code>命令报了三个错误。</p><p>另一个需要注意的地方是，大括号内部的逗号前后不能有空格。否则，大括号扩展会失效。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> &#123;1 , 2&#125;</span><br><span class="line">&#123;1 , 2&#125;</span><br></pre></td></tr></table></figure><p>上面例子中，逗号前后有空格，Bash 就会认为这不是大括号扩展，而是三个独立的参数。</p><p>逗号前面可以没有值，表示扩展的第一项为空。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cp</span> a.log&#123;,.bak&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 等同于</span></span><br><span class="line"><span class="comment"># cp a.log a.log.bak</span></span><br></pre></td></tr></table></figure><p>大括号可以嵌套。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> &#123;j&#123;p,pe&#125;g,png&#125;</span><br><span class="line">jpg jpeg png</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> a&#123;A&#123;1,2&#125;,B&#123;3,4&#125;&#125;b</span><br><span class="line">aA1b aA2b aB3b aB4b</span><br></pre></td></tr></table></figure><p>大括号也可以与其他模式联用，并且总是先于其他模式进行扩展。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> /bin/&#123;<span class="built_in">cat</span>,b*&#125;</span><br><span class="line">/bin/cat /bin/b2sum /bin/base32 /bin/base64 ... ...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 基本等同于</span></span><br><span class="line">$ <span class="built_in">echo</span> /bin/cat;<span class="built_in">echo</span> /bin/b*</span><br></pre></td></tr></table></figure><p>上面例子中，会先进行大括号扩展，然后进行<code>*</code>扩展，等同于执行两条<code>echo</code>命令。</p><p>大括号可以用于多字符的模式，方括号不行（只能匹配单字符）。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> &#123;<span class="built_in">cat</span>,dog&#125;</span><br><span class="line"><span class="built_in">cat</span> dog</span><br></pre></td></tr></table></figure><p>由于大括号扩展<code>&#123;...&#125;</code>不是文件名扩展，所以它总是会扩展的。这与方括号扩展<code>[...]</code>完全不同，如果匹配的文件不存在，方括号就不会扩展。这一点要注意区分。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不存在 a.txt 和 b.txt</span></span><br><span class="line">$ <span class="built_in">echo</span> [ab].txt</span><br><span class="line">[ab].txt</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> &#123;a,b&#125;.txt</span><br><span class="line">a.txt b.txt</span><br></pre></td></tr></table></figure><p>上面例子中，如果不存在<code>a.txt</code>和<code>b.txt</code>，那么<code>[ab].txt</code>就会变成一个普通的文件名，而<code>&#123;a,b&#125;.txt</code>可以照样扩展。</p><h2 id="start…end-扩展">{start…end} 扩展</h2><p>大括号扩展有一个简写形式<code>&#123;start..end&#125;</code>，表示扩展成一个连续序列。比如，<code>&#123;a..z&#125;</code>可以扩展成26个小写英文字母。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> &#123;a..c&#125;</span><br><span class="line">a b c</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> d&#123;a..d&#125;g</span><br><span class="line">dag dbg dcg ddg</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> &#123;1..4&#125;</span><br><span class="line">1 2 3 4</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> Number_&#123;1..5&#125;</span><br><span class="line">Number_1 Number_2 Number_3 Number_4 Number_5</span><br></pre></td></tr></table></figure><p>这种简写形式支持逆序。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> &#123;c..a&#125;</span><br><span class="line">c b a</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> &#123;5..1&#125;</span><br><span class="line">5 4 3 2 1</span><br></pre></td></tr></table></figure><p>注意，如果遇到无法理解的简写，大括号模式就会原样输出，不会扩展。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> &#123;a1..3c&#125;</span><br><span class="line">&#123;a1..3c&#125;</span><br></pre></td></tr></table></figure><p>这种简写形式可以嵌套使用，形成复杂的扩展。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> .&#123;mp&#123;3..4&#125;,m4&#123;a,b,p,v&#125;&#125;</span><br><span class="line">.mp3 .mp4 .m4a .m4b .m4p .m4v</span><br></pre></td></tr></table></figure><p>大括号扩展的常见用途为新建一系列目录。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> &#123;2007..2009&#125;-&#123;01..12&#125;</span><br></pre></td></tr></table></figure><p>上面命令会新建36个子目录，每个子目录的名字都是”年份-月份“。</p><p>这个写法的另一个常见用途，是直接用于<code>for</code>循环。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..4&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>上面例子会循环4次。</p><p>如果整数前面有前导<code>0</code>，扩展输出的每一项都有前导<code>0</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> &#123;01..5&#125;</span><br><span class="line">01 02 03 04 05</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> &#123;001..5&#125;</span><br><span class="line">001 002 003 004 005</span><br></pre></td></tr></table></figure><p>这种简写形式还可以使用第二个双点号（<code>start..end..step</code>），用来指定扩展的步长。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> &#123;0..8..2&#125;</span><br><span class="line">0 2 4 6 8</span><br></pre></td></tr></table></figure><p>上面代码将<code>0</code>扩展到<code>8</code>，每次递增的长度为<code>2</code>，所以一共输出5个数字。</p><p>多个简写形式连用，会有循环处理的效果。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> &#123;a..c&#125;&#123;1..3&#125;</span><br><span class="line">a1 a2 a3 b1 b2 b3 c1 c2 c3</span><br></pre></td></tr></table></figure><h2 id="变量扩展">变量扩展</h2><p>Bash 将美元符号<code>$</code>开头的词元视为变量，将其扩展成变量值，详见《Bash 变量》一章。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$SHELL</span></span><br><span class="line">/bin/bash</span><br></pre></td></tr></table></figure><p>变量名除了放在美元符号后面，也可以放在<code>$&#123;&#125;</code>里面。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;SHELL&#125;</span></span><br><span class="line">/bin/bash</span><br></pre></td></tr></table></figure><p><code>$&#123;!string*&#125;</code>或<code>$&#123;!string@&#125;</code>返回所有匹配给定字符串<code>string</code>的变量名。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;!S*&#125;</span></span><br><span class="line">SECONDS SHELL SHELLOPTS SHLVL SSH_AGENT_PID SSH_AUTH_SOCK</span><br></pre></td></tr></table></figure><p>上面例子中，<code>$&#123;!S*&#125;</code>扩展成所有以<code>S</code>开头的变量名。</p><h2 id="子命令扩展">子命令扩展</h2><p><code>$(...)</code>可以扩展成另一个命令的运行结果，该命令的所有输出都会作为返回值。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> $(<span class="built_in">date</span>)</span><br><span class="line">Tue Jan 28 00:01:13 CST 2020</span><br></pre></td></tr></table></figure><p>上面例子中，<code>$(date)</code>返回<code>date</code>命令的运行结果。</p><p>还有另一种较老的语法，子命令放在反引号之中，也可以扩展成命令的运行结果。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> `<span class="built_in">date</span>`</span><br><span class="line">Tue Jan 28 00:01:13 CST 2020</span><br></pre></td></tr></table></figure><p><code>$(...)</code>可以嵌套，比如<code>$(ls $(pwd))</code>。</p><h2 id="算术扩展">算术扩展</h2><p><code>$((...))</code>可以扩展成整数运算的结果，详见《Bash 的算术运算》一章。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> $((<span class="number">2</span> + <span class="number">2</span>))</span><br><span class="line">4</span><br></pre></td></tr></table></figure><h2 id="字符类">字符类</h2><p><code>[[:class:]]</code>表示一个字符类，扩展成某一类特定字符之中的一个。常用的字符类如下。</p><ul><li><code>[[:alnum:]]</code>：匹配任意英文字母与数字</li><li><code>[[:alpha:]]</code>：匹配任意英文字母</li><li><code>[[:blank:]]</code>：空格和 Tab 键。</li><li><code>[[:cntrl:]]</code>：ASCII 码 0-31 的不可打印字符。</li><li><code>[[:digit:]]</code>：匹配任意数字 0-9。</li><li><code>[[:graph:]]</code>：A-Z、a-z、0-9 和标点符号。</li><li><code>[[:lower:]]</code>：匹配任意小写字母 a-z。</li><li><code>[[:print:]]</code>：ASCII 码 32-127 的可打印字符。</li><li><code>[[:punct:]]</code>：标点符号（除了 A-Z、a-z、0-9 的可打印字符）。</li><li><code>[[:space:]]</code>：空格、Tab、LF（10）、VT（11）、FF（12）、CR（13）。</li><li><code>[[:upper:]]</code>：匹配任意大写字母 A-Z。</li><li><code>[[:xdigit:]]</code>：16进制字符（A-F、a-f、0-9）。</li></ul><p>请看下面的例子。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> [[:upper:]]*</span><br></pre></td></tr></table></figure><p>上面命令输出所有大写字母开头的文件名。</p><p>字符类的第一个方括号后面，可以加上感叹号<code>!</code>，表示否定。比如，<code>[![:digit:]]</code>匹配所有非数字。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> [![:digit:]]*</span><br></pre></td></tr></table></figure><p>上面命令输出所有不以数字开头的文件名。</p><p>字符类也属于文件名扩展，如果没有匹配的文件名，字符类就会原样输出。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不存在以大写字母开头的文件</span></span><br><span class="line">$ <span class="built_in">echo</span> [[:upper:]]*</span><br><span class="line">[[:upper:]]*</span><br></pre></td></tr></table></figure><p>上面例子中，由于没有可匹配的文件，字符类就原样输出了。</p><h2 id="使用注意点">使用注意点</h2><p>通配符有一些使用注意点，不可不知。</p><p><strong>（1）通配符是先解释，再执行。</strong></p><p>Bash 接收到命令以后，发现里面有通配符，会进行通配符扩展，然后再执行命令。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> a*.txt</span><br><span class="line">ab.txt</span><br></pre></td></tr></table></figure><p>上面命令的执行过程是，Bash 先将<code>a*.txt</code>扩展成<code>ab.txt</code>，然后再执行<code>ls ab.txt</code>。</p><p><strong>（2）文件名扩展在不匹配时，会原样输出。</strong></p><p>文件名扩展在没有可匹配的文件时，会原样输出。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不存在 r 开头的文件名</span></span><br><span class="line">$ <span class="built_in">echo</span> r*</span><br><span class="line">r*</span><br></pre></td></tr></table></figure><p>上面代码中，由于不存在<code>r</code>开头的文件名，<code>r*</code>会原样输出。</p><p>下面是另一个例子。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> *.csv</span><br><span class="line"><span class="built_in">ls</span>: *.csv: No such file or directory</span><br></pre></td></tr></table></figure><p>另外，前面已经说过，大括号扩展<code>&#123;...&#125;</code>不是文件名扩展。</p><p><strong>（3）只适用于单层路径。</strong></p><p>所有文件名扩展只匹配单层路径，不能跨目录匹配，即无法匹配子目录里面的文件。或者说，<code>?</code>或<code>*</code>这样的通配符，不能匹配路径分隔符（<code>/</code>）。</p><p>如果要匹配子目录里面的文件，可以写成下面这样。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> */*.txt</span><br></pre></td></tr></table></figure><p>Bash 4.0 新增了一个<code>globstar</code>参数，允许<code>**</code>匹配零个或多个子目录，详见后面<code>shopt</code>命令的介绍。</p><p><strong>（4）文件名可以使用通配符。</strong></p><p>Bash 允许文件名使用通配符，即文件名包括特殊字符。这时引用文件名，需要把文件名放在单引号或双引号里面。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">touch</span> <span class="string">&#x27;fo*&#x27;</span></span><br><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">fo*</span><br></pre></td></tr></table></figure><p>上面代码创建了一个<code>fo*</code>文件，这时<code>*</code>就是文件名的一部分。</p><h2 id="量词语法">量词语法</h2><p>量词语法用来控制模式匹配的次数。它只有在 Bash 的<code>extglob</code>参数打开的情况下才能使用，不过一般是默认打开的。下面的命令可以查询。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">shopt</span> extglob</span><br><span class="line">extglob        	on</span><br></pre></td></tr></table></figure><p>如果<code>extglob</code>参数是关闭的，可以用下面的命令打开。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">shopt</span> -s extglob</span><br></pre></td></tr></table></figure><p>量词语法有下面几个。</p><ul><li><code>?(pattern-list)</code>：模式匹配零次或一次。</li><li><code>*(pattern-list)</code>：模式匹配零次或多次。</li><li><code>+(pattern-list)</code>：模式匹配一次或多次。</li><li><code>@(pattern-list)</code>：只匹配一次模式。</li><li><code>!(pattern-list)</code>：匹配给定模式以外的任何内容。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> abc?(.)txt</span><br><span class="line">abctxt abc.txt</span><br></pre></td></tr></table></figure><p>上面例子中，<code>?(.)</code>匹配零个或一个点。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> abc?(def)</span><br><span class="line">abc abcdef</span><br></pre></td></tr></table></figure><p>上面例子中，<code>?(def)</code>匹配零个或一个<code>def</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> abc@(.txt|.php)</span><br><span class="line">abc.php abc.txt</span><br></pre></td></tr></table></figure><p>上面例子中，<code>@(.txt|.php)</code>匹配文件有且只有一个<code>.txt</code>或<code>.php</code>后缀名。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> abc+(.txt)</span><br><span class="line">abc.txt abc.txt.txt</span><br></pre></td></tr></table></figure><p>上面例子中，<code>+(.txt)</code>匹配文件有一个或多个<code>.txt</code>后缀名。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> a!(b).txt</span><br><span class="line">a.txt abb.txt ac.txt</span><br></pre></td></tr></table></figure><p>上面例子中，<code>!(b)</code>表示匹配单个字母<code>b</code>以外的任意内容，所以除了<code>ab.txt</code>以外，其他文件名都能匹配。</p><p>量词语法也属于文件名扩展，如果不存在可匹配的文件，就会原样输出。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 没有 abc 开头的文件名</span></span><br><span class="line">$ <span class="built_in">ls</span> abc?(def)</span><br><span class="line"><span class="built_in">ls</span>: 无法访问<span class="string">&#x27;abc?(def)&#x27;</span>: 没有那个文件或目录</span><br></pre></td></tr></table></figure><p>上面例子中，由于没有可匹配的文件，<code>abc?(def)</code>就原样输出，导致<code>ls</code>命令报错。</p><h2 id="shopt-命令">shopt 命令</h2><p><code>shopt</code>命令可以调整 Bash 的行为。它有好几个参数跟通配符扩展有关。</p><p><code>shopt</code>命令的使用方法如下。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打开某个参数</span></span><br><span class="line">$ <span class="built_in">shopt</span> -s [optionname]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭某个参数</span></span><br><span class="line">$ <span class="built_in">shopt</span> -u [optionname]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询某个参数关闭还是打开</span></span><br><span class="line">$ <span class="built_in">shopt</span> [optionname]</span><br></pre></td></tr></table></figure><p><strong>（1）dotglob 参数</strong></p><p><code>dotglob</code>参数可以让扩展结果包括隐藏文件（即点开头的文件）。</p><p>正常情况下，扩展结果不包括隐藏文件。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> *</span><br><span class="line">abc.txt</span><br></pre></td></tr></table></figure><p>打开<code>dotglob</code>，就会包括隐藏文件。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">shopt</span> -s dotglob</span><br><span class="line">$ <span class="built_in">ls</span> *</span><br><span class="line">abc.txt .config</span><br></pre></td></tr></table></figure><p><strong>（2）nullglob 参数</strong></p><p><code>nullglob</code>参数可以让通配符不匹配任何文件名时，返回空字符。</p><p>默认情况下，通配符不匹配任何文件名时，会保持不变。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">rm</span> b*</span><br><span class="line"><span class="built_in">rm</span>: 无法删除<span class="string">&#x27;b*&#x27;</span>: 没有那个文件或目录</span><br></pre></td></tr></table></figure><p>上面例子中，由于当前目录不包括<code>b</code>开头的文件名，导致<code>b*</code>不会发生文件名扩展，保持原样不变，所以<code>rm</code>命令报错没有<code>b*</code>这个文件。</p><p>打开<code>nullglob</code>参数，就可以让不匹配的通配符返回空字符串。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">shopt</span> -s nullglob</span><br><span class="line">$ <span class="built_in">rm</span> b*</span><br><span class="line"><span class="built_in">rm</span>: 缺少操作数</span><br></pre></td></tr></table></figure><p>上面例子中，由于没有<code>b*</code>匹配的文件名，所以<code>rm b*</code>扩展成了<code>rm</code>，导致报错变成了”缺少操作数“。</p><p><strong>（3）failglob 参数</strong></p><p><code>failglob</code>参数使得通配符不匹配任何文件名时，Bash 会直接报错，而不是让各个命令去处理。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">shopt</span> -s failglob</span><br><span class="line">$ <span class="built_in">rm</span> b*</span><br><span class="line">bash: 无匹配: b*</span><br></pre></td></tr></table></figure><p>上面例子中，打开<code>failglob</code>以后，由于<code>b*</code>不匹配任何文件名，Bash 直接报错了，不再让<code>rm</code>命令去处理。</p><p><strong>（4）extglob 参数</strong></p><p><code>extglob</code>参数使得 Bash 支持 ksh 的一些扩展语法。它默认应该是打开的。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">shopt</span> extglob</span><br><span class="line">extglob        	on</span><br></pre></td></tr></table></figure><p>它的主要应用是支持量词语法。如果不希望支持量词语法，可以用下面的命令关闭。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">shopt</span> -u extglob</span><br></pre></td></tr></table></figure><p><strong>（5）nocaseglob 参数</strong></p><p><code>nocaseglob</code>参数可以让通配符扩展不区分大小写。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">shopt</span> -s nocaseglob</span><br><span class="line">$ <span class="built_in">ls</span> /windows/program*</span><br><span class="line">/windows/ProgramData</span><br><span class="line">/windows/Program Files</span><br><span class="line">/windows/Program Files (x86)</span><br></pre></td></tr></table></figure><p>上面例子中，打开<code>nocaseglob</code>以后，<code>program*</code>就不区分大小写了，可以匹配<code>ProgramData</code>等。</p><p><strong>（6）globstar 参数</strong></p><p><code>globstar</code>参数可以使得<code>**</code>匹配零个或多个子目录。该参数默认是关闭的。</p><p>假设有下面的文件结构。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a.txt</span><br><span class="line">sub1/b.txt</span><br><span class="line">sub1/sub2/c.txt</span><br></pre></td></tr></table></figure><p>上面的文件结构中，顶层目录、第一级子目录<code>sub1</code>、第二级子目录<code>sub1\sub2</code>里面各有一个文本文件。请问怎样才能使用通配符，将它们显示出来？</p><p>默认情况下，只能写成下面这样。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> *.txt */*.txt */*/*.txt</span><br><span class="line">a.txt  sub1/b.txt  sub1/sub2/c.txt</span><br></pre></td></tr></table></figure><p>这是因为<code>*</code>只匹配当前目录，如果要匹配子目录，只能一层层写出来。</p><p>打开<code>globstar</code>参数以后，<code>**</code>匹配零个或多个子目录。因此，<code>**/*.txt</code>就可以得到想要的结果。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">shopt</span> -s globstar</span><br><span class="line">$ <span class="built_in">ls</span> **/*.txt</span><br><span class="line">a.txt  sub1/b.txt  sub1/sub2/c.txt</span><br></pre></td></tr></table></figure><h2 id="参考链接">参考链接</h2><ul><li><a target="_blank" rel="noopener" href="https://medium.com/@leedowthwaite/why-most-people-only-think-they-understand-wildcards-63bb9c2024ab">Think You Understand Wildcards? Think Again</a></li><li><a target="_blank" rel="noopener" href="https://appcodelabs.com/advanced-wildcard-patterns-most-people-dont-know">Advanced Wildcard Patterns Most People Don’t Know</a></li><li><a target="_blank" rel="noopener" href="https://wangdoc.com/bash/intro">Bash 简介 - Bash 脚本教程 - 网道 (wangdoc.com)</a></li></ul></div><div class="article-licensing box"><div class="licensing-title"><p>Bash脚本编程</p><p><a href="https://tomatoblog.netlify.app/Tutorial/Bash script/">https://tomatoblog.netlify.app/Tutorial/Bash script/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>TOMATO</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2023-12-31</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2023-12-31</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY 4.0" href="https://creativecommons.org/licenses/by/4.0/deed.zh">CC BY 4.0</a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Bash/">Bash</a></div></article></div><div class="card"><nav class="post-navigation mt-4 level is-mobile card-content"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/Interview/network/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">计算机网络面试</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/BackEnd/go/gin/"><span class="level-item">gin笔记</span><i class="level-item fas fa-chevron-right"></i></a></div></nav></div></div><style>.column.column-left,.column.column-right{display:none}</style><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/static/avatar.jpg" alt="ToMaTo"></figure><p class="title is-size-4 is-block" style="line-height:inherit">ToMaTo</p><p class="is-size-6 is-block">Back-end Developer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>GuangZhou, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">59</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">29</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/dontSerious/" target="_blank" rel="noopener" id="widget-follow">Github</a></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/04/"><span class="level-start"><span class="level-item">2024年04月</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/03/"><span class="level-start"><span class="level-item">2024年03月</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/02/"><span class="level-start"><span class="level-item">2024年02月</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/12/"><span class="level-start"><span class="level-item">2023年12月</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/11/"><span class="level-start"><span class="level-item">2023年11月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/10/"><span class="level-start"><span class="level-item">2023年10月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/09/"><span class="level-start"><span class="level-item">2023年09月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/08/"><span class="level-start"><span class="level-item">2023年08月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/06/"><span class="level-start"><span class="level-item">2023年06月</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/05/"><span class="level-start"><span class="level-item">2023年05月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/04/"><span class="level-start"><span class="level-item">2023年04月</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/03/"><span class="level-start"><span class="level-item">2023年03月</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/02/"><span class="level-start"><span class="level-item">2023年02月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time datetime="2024-04-28T10:24:18.000Z">2024-04-28</time></p><p class="title"><a href="/FrontEnd/Flutter/">flutter 笔记</a></p><p class="categories"><a href="/categories/FrontEnd/">FrontEnd</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2024-03-26T06:43:15.000Z">2024-03-26</time></p><p class="title"><a href="/Interview/go/">go面试</a></p><p class="categories"><a href="/categories/Interview/">Interview</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2024-03-26T02:10:11.000Z">2024-03-26</time></p><p class="title"><a href="/Interview/datastruct/">数据结构和算法面试</a></p><p class="categories"><a href="/categories/Interview/">Interview</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2024-03-26T02:10:11.000Z">2024-03-26</time></p><p class="title"><a href="/Interview/distributed/">分布式面试</a></p><p class="categories"><a href="/categories/Interview/">Interview</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2024-03-16T07:28:10.000Z">2024-03-16</time></p><p class="title"><a href="/BackEnd/sql/index/">SQL 索引</a></p><p class="categories"><a href="/categories/BackEnd/">BackEnd</a></p></div></article></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#基础"><span class="level-left"><span class="level-item">1</span><span class="level-item">基础</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#创建"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">创建</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#执行"><span class="level-left"><span class="level-item">1.1.1</span><span class="level-item">执行</span></span></a></li></ul></li><li><a class="level is-mobile" href="#变量"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">变量</span></span></a></li><li><a class="level is-mobile" href="#传递参数变量"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">传递参数变量</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#特殊变量"><span class="level-left"><span class="level-item">1.3.1</span><span class="level-item">特殊变量</span></span></a></li><li><a class="level is-mobile" href="#read"><span class="level-left"><span class="level-item">1.3.2</span><span class="level-item">read</span></span></a></li></ul></li><li><a class="level is-mobile" href="#执行算术运算"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">执行算术运算</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#浮点运算-bc"><span class="level-left"><span class="level-item">1.4.1</span><span class="level-item">浮点运算 bc</span></span></a></li></ul></li><li><a class="level is-mobile" href="#数组"><span class="level-left"><span class="level-item">1.5</span><span class="level-item">数组</span></span></a></li><li><a class="level is-mobile" href="#字符串"><span class="level-left"><span class="level-item">1.6</span><span class="level-item">字符串</span></span></a></li><li><a class="level is-mobile" href="#条件语句"><span class="level-left"><span class="level-item">1.7</span><span class="level-item">条件语句</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#eq"><span class="level-left"><span class="level-item">1.7.1</span><span class="level-item">-eq</span></span></a></li></ul></li><li><a class="level is-mobile" href="#循环"><span class="level-left"><span class="level-item">1.8</span><span class="level-item">循环</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#For"><span class="level-left"><span class="level-item">1.8.1</span><span class="level-item">For</span></span></a></li><li><a class="level is-mobile" href="#While"><span class="level-left"><span class="level-item">1.8.2</span><span class="level-item">While</span></span></a></li><li><a class="level is-mobile" href="#Until"><span class="level-left"><span class="level-item">1.8.3</span><span class="level-item">Until</span></span></a></li></ul></li><li><a class="level is-mobile" href="#函数"><span class="level-left"><span class="level-item">1.9</span><span class="level-item">函数</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Bash-的模式扩展"><span class="level-left"><span class="level-item">2</span><span class="level-item">Bash 的模式扩展</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#简介"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">简介</span></span></a></li><li><a class="level is-mobile" href="#波浪线扩展"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">波浪线扩展</span></span></a></li><li><a class="level is-mobile" href="#字符扩展"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">? 字符扩展</span></span></a></li><li><a class="level is-mobile" href="#字符扩展-v2"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">* 字符扩展</span></span></a></li><li><a class="level is-mobile" href="#方括号扩展"><span class="level-left"><span class="level-item">2.5</span><span class="level-item">方括号扩展</span></span></a></li><li><a class="level is-mobile" href="#start-end-扩展"><span class="level-left"><span class="level-item">2.6</span><span class="level-item">[start-end] 扩展</span></span></a></li><li><a class="level is-mobile" href="#大括号扩展"><span class="level-left"><span class="level-item">2.7</span><span class="level-item">大括号扩展</span></span></a></li><li><a class="level is-mobile" href="#start…end-扩展"><span class="level-left"><span class="level-item">2.8</span><span class="level-item">{start…end} 扩展</span></span></a></li><li><a class="level is-mobile" href="#变量扩展"><span class="level-left"><span class="level-item">2.9</span><span class="level-item">变量扩展</span></span></a></li><li><a class="level is-mobile" href="#子命令扩展"><span class="level-left"><span class="level-item">2.10</span><span class="level-item">子命令扩展</span></span></a></li><li><a class="level is-mobile" href="#算术扩展"><span class="level-left"><span class="level-item">2.11</span><span class="level-item">算术扩展</span></span></a></li><li><a class="level is-mobile" href="#字符类"><span class="level-left"><span class="level-item">2.12</span><span class="level-item">字符类</span></span></a></li><li><a class="level is-mobile" href="#使用注意点"><span class="level-left"><span class="level-item">2.13</span><span class="level-item">使用注意点</span></span></a></li><li><a class="level is-mobile" href="#量词语法"><span class="level-left"><span class="level-item">2.14</span><span class="level-item">量词语法</span></span></a></li><li><a class="level is-mobile" href="#shopt-命令"><span class="level-left"><span class="level-item">2.15</span><span class="level-item">shopt 命令</span></span></a></li><li><a class="level is-mobile" href="#参考链接"><span class="level-left"><span class="level-item">2.16</span><span class="level-item">参考链接</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list>li>a.is-active+.menu-list{display:block}#toc .menu-list>li>a+.menu-list{display:none}</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/BackEnd/"><span class="level-start"><span class="level-item">BackEnd</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/categories/FrontEnd/"><span class="level-start"><span class="level-item">FrontEnd</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Interview/"><span class="level-start"><span class="level-item">Interview</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Memo/"><span class="level-start"><span class="level-item">Memo</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/Project/"><span class="level-start"><span class="level-item">Project</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Study/"><span class="level-start"><span class="level-item">Study</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/categories/Tutorial/"><span class="level-start"><span class="level-item">Tutorial</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Flutter/"><span class="tag">Flutter</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MIT6-S081/"><span class="tag">MIT6.S081</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/React/"><span class="tag">React</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TypeScript/"><span class="tag">TypeScript</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vue-js/"><span class="tag">Vue.js</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bookNote/"><span class="tag">bookNote</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/career/"><span class="tag">career</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cpp/"><span class="tag">cpp</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cs/"><span class="tag">cs</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csapp/"><span class="tag">csapp</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/curriculum/"><span class="tag">curriculum</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dataStruct/"><span class="tag">dataStruct</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/datastruct/"><span class="tag">datastruct</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/distributed/"><span class="tag">distributed</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/go/"><span class="tag">go</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/live/"><span class="tag">live</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/log/"><span class="tag">log</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/memo/"><span class="tag">memo</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/network/"><span class="tag">network</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nodejs/"><span class="tag">nodejs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/obsidian/"><span class="tag">obsidian</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/project/"><span class="tag">project</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/psychology/"><span class="tag">psychology</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/simpleBank/"><span class="tag">simpleBank</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sql/"><span class="tag">sql</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tools/"><span class="tag">tools</span><span class="tag">10</span></a></div></div></div></div></div></div><style>.column.column-left,.column.column-right{display:block}</style></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img class="logo-img" src="/static/avatar.jpg" alt="Tomato&#039;s Blog" height="28"><img class="logo-img-dark" src="/static/avatar.jpg" alt="Tomato&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2024 TOMATO</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/imaegoo/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/deed.zh"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="/js/imaegoo/jquery/3.3.1/dist/jquery.min.js"></script><script src="/js/imaegoo/moment/2.22.2/min/moment-with-locales.min.js"></script><script src="/js/imaegoo/clipboard/2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn")</script><script>var IcarusThemeSettings={article:{highlight:{clipboard:!0,fold:"unfolded"}}}</script><script src="/js/column.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="/js/imaegoo/cookieconsent/3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-right",
        content: {
          message: "此网站使用 Cookie，以启用评论系统和分析功能。",
          dismiss: "知道了",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="/js/imaegoo/lightgallery/1.10.0/dist/js/lightgallery.min.js" defer></script><script src="/js/imaegoo/justifiedGallery/3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><div class="searchbox-pinyin"><label class="checkbox"><input id="search-by-pinyin" type="checkbox" checked><span> 拼音检索</span></label></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/imaegoo/pinyin.js" defer></script><script src="/js/insight.js" defer></script><script>document.addEventListener("DOMContentLoaded",function(){loadInsight({contentUrl:"/content.json"},{hint:"想要查找什么...",untitled:"(无标题)",posts:"文章",pages:"页面",categories:"分类",tags:"标签"})})</script><script type="text/javascript" src="/js/imaegoo/imaegoo.js"></script><script type="text/javascript" src="/js/imaegoo/universe.js"></script></body></html>