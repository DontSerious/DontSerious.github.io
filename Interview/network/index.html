<!doctype html><html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta><title>计算机网络面试 - Tomato&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Tomato&#039;s Blog"><meta name="msapplication-TileImage" content="static/avatar.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Tomato&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="HTTP 1.1 优点：  简单 灵活、易于扩展 应用广泛、跨平台  缺点：  明文传输 应用层队头阻塞 无状态：使用 Cookie 解决 没有请求优先级控制 请求只能从客户端开始，服务器只能被动响应 请求 &amp;#x2F; 响应头部（Header）未经压缩就发送，首部信息越多延迟越大，只能压缩 Body 的部分  新增：  长连接：只要任意一端没有明确提出断开连接，则保持 TCP 连接状态，使用长连接的方式改"><meta property="og:type" content="article"><meta property="og:title" content="计算机网络面试"><meta property="og:url" content="https://tomatoblog.netlify.app/Interview/network/"><meta property="og:site_name" content="Tomato&#039;s Blog"><meta property="og:description" content="HTTP 1.1 优点：  简单 灵活、易于扩展 应用广泛、跨平台  缺点：  明文传输 应用层队头阻塞 无状态：使用 Cookie 解决 没有请求优先级控制 请求只能从客户端开始，服务器只能被动响应 请求 &amp;#x2F; 响应头部（Header）未经压缩就发送，首部信息越多延迟越大，只能压缩 Body 的部分  新增：  长连接：只要任意一端没有明确提出断开连接，则保持 TCP 连接状态，使用长连接的方式改"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://tomatoblog.netlify.app/static/study/network/%E4%BA%94%E5%A4%A7%E7%B1%BBHTTP%E7%8A%B6%E6%80%81%E7%A0%81.webp"><meta property="og:image" content="https://tomatoblog.netlify.app/static/study/network/%E5%BC%BA%E5%88%B6%E7%BC%93%E5%AD%98.webp"><meta property="og:image" content="https://tomatoblog.netlify.app/static/study/network/%E7%BC%93%E5%AD%98etag.webp"><meta property="og:image" content="https://tomatoblog.netlify.app/static/study/network/http%E7%BC%93%E5%AD%98.webp"><meta property="og:image" content="https://tomatoblog.netlify.app/static/study/network/%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81.webp"><meta property="og:image" content="https://tomatoblog.netlify.app/static/study/network/25-HTTP2.webp"><meta property="og:image" content="https://tomatoblog.netlify.app/static/study/network/%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%B8%A7.webp"><meta property="og:image" content="https://tomatoblog.netlify.app/static/study/network/stream.webp"><meta property="og:image" content="https://tomatoblog.netlify.app/static/study/network/http2%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8.webp"><meta property="og:image" content="https://tomatoblog.netlify.app/static/study/network/server%20push.webp"><meta property="og:image" content="https://tomatoblog.netlify.app/static/study/network/tcp%E9%98%9F%E5%A4%B4%E9%98%BB%E5%A1%9E.webp"><meta property="og:image" content="https://tomatoblog.netlify.app/static/study/network/27-HTTP3.webp"><meta property="og:image" content="https://tomatoblog.netlify.app/static/study/network/websocket.webp"><meta property="og:image" content="https://tomatoblog.netlify.app/static/study/network/websocket2.webp"><meta property="og:image" content="https://tomatoblog.netlify.app/static/study/network/websocket3.webp"><meta property="article:published_time" content="2024-02-13T02:34:49.000Z"><meta property="article:modified_time" content="2024-03-26T02:42:37.000Z"><meta property="article:author" content="TOMATO"><meta property="article:tag" content="network"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://tomatoblog.netlify.app/static/study/network/%E4%BA%94%E5%A4%A7%E7%B1%BBHTTP%E7%8A%B6%E6%80%81%E7%A0%81.webp"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://tomatoblog.netlify.app/Interview/network/"},"headline":"计算机网络面试","image":["https://tomatoblog.netlify.app/static/study/network/%E4%BA%94%E5%A4%A7%E7%B1%BBHTTP%E7%8A%B6%E6%80%81%E7%A0%81.webp","https://tomatoblog.netlify.app/static/study/network/%E5%BC%BA%E5%88%B6%E7%BC%93%E5%AD%98.webp","https://tomatoblog.netlify.app/static/study/network/%E7%BC%93%E5%AD%98etag.webp","https://tomatoblog.netlify.app/static/study/network/http%E7%BC%93%E5%AD%98.webp","https://tomatoblog.netlify.app/static/study/network/%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81.webp","https://tomatoblog.netlify.app/static/study/network/25-HTTP2.webp","https://tomatoblog.netlify.app/static/study/network/%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%B8%A7.webp","https://tomatoblog.netlify.app/static/study/network/stream.webp","https://tomatoblog.netlify.app/static/study/network/http2%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8.webp","https://tomatoblog.netlify.app/static/study/network/server%20push.webp","https://tomatoblog.netlify.app/static/study/network/tcp%E9%98%9F%E5%A4%B4%E9%98%BB%E5%A1%9E.webp","https://tomatoblog.netlify.app/static/study/network/27-HTTP3.webp","https://tomatoblog.netlify.app/static/study/network/websocket.webp","https://tomatoblog.netlify.app/static/study/network/websocket2.webp","https://tomatoblog.netlify.app/static/study/network/websocket3.webp"],"datePublished":"2024-02-13T02:34:49.000Z","dateModified":"2024-03-26T02:42:37.000Z","author":{"@type":"Person","name":"TOMATO"},"publisher":{"@type":"Organization","name":"Tomato's Blog","logo":{"@type":"ImageObject","url":{"light":"static/avatar.jpg","dark":"static/avatar.jpg"}}},"description":"HTTP 1.1 优点：  简单 灵活、易于扩展 应用广泛、跨平台  缺点：  明文传输 应用层队头阻塞 无状态：使用 Cookie 解决 没有请求优先级控制 请求只能从客户端开始，服务器只能被动响应 请求 &#x2F; 响应头部（Header）未经压缩就发送，首部信息越多延迟越大，只能压缩 Body 的部分  新增：  长连接：只要任意一端没有明确提出断开连接，则保持 TCP 连接状态，使用长连接的方式改"}</script><link rel="canonical" href="https://tomatoblog.netlify.app/Interview/network/"><link rel="icon" href="/static/avatar.jpg"><link rel="stylesheet" href="/css/font/fontawesome/css/all.min.css"><link rel="stylesheet" href="/js/imaegoo/highlight.js/11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="/css/default.css"><link rel="stylesheet" href="/js/imaegoo/cookieconsent/3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="/js/imaegoo/lightgallery/1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="/js/imaegoo/justifiedGallery/3.8.1/dist/css/justifiedGallery.min.css"><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="/js/imaegoo/pace-js/1.2.4/pace.min.js"></script><script>(function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();</script><meta name="generator" content="Hexo 7.1.1"></head><body class="is-3-column"><script type="text/javascript" src="/js/imaegoo/night.js"></script><canvas id="universe"></canvas><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img class="logo-img" src="/static/avatar.jpg" alt="Tomato&#039;s Blog" height="28"><img class="logo-img-dark" src="/static/avatar.jpg" alt="Tomato&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives/">时间轴</a><a class="navbar-item" href="/categories/">分类</a><a class="navbar-item" href="/tags/">标签</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i><span>  目录</span></a><a class="navbar-item night" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2024-02-13T02:34:49.000Z" title="2/13/2024, 2:34:49 AM">2024-02-13</time>发表</span><span class="level-item"><time datetime="2024-03-26T02:42:37.000Z" title="3/26/2024, 2:42:37 AM">2024-03-26</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Interview/">Interview</a></span><span class="level-item">41 分钟读完 (大约6224个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">计算机网络面试</h1><div class="content"><h1 id="HTTP-1-1">HTTP 1.1</h1><p>优点：</p><ul><li>简单</li><li>灵活、易于扩展</li><li>应用广泛、跨平台</li></ul><p>缺点：</p><ul><li>明文传输</li><li>应用层队头阻塞</li><li>无状态：使用 <code>Cookie</code> 解决</li><li>没有请求优先级控制</li><li>请求只能从客户端开始，服务器只能被动响应</li><li>请求 / 响应头部（Header）未经压缩就发送，首部信息越多延迟越大，只能压缩 <code>Body</code> 的部分</li></ul><p>新增：</p><ul><li>长连接：只要任意一端没有明确提出断开连接，则保持 TCP 连接状态，使用长连接的方式改善了 HTTP/1.0 短连接造成的性能开销。</li><li>管道网络传输：可在同一个 TCP 连接里面，客户端可以发起多个请求，只要第一个请求发出去了，不必等其回来，就可以发第二个请求出去，减少整体的响应时间。但是<strong>服务器必须按照接收请求的顺序发送对这些管道化请求的响应</strong>。出现 <code>队头阻塞</code> 问题。</li></ul><h2 id="优化">优化</h2><ul><li>避免发送 HTTP 请求<ul><li><a href="#%E7%BC%93%E5%AD%98">缓存</a></li></ul></li><li>减少请求次数<ul><li>利用代理服务器减少重定向次数</li><li>合并请求，小资源合并为大资源，减少请求次数就是减少头部数据重复传输，减少 TCP 连接数量，最终省去 TCP 握手和慢启动的网络消耗</li><li>延迟发送，按需获取</li></ul></li><li>压缩响应数据<ul><li>有损压缩</li><li>无损压缩</li></ul></li></ul><h1 id="HTTP">HTTP</h1><p>超文本传输协议</p><p><strong>HTTP 是一个在计算机世界里专门在「两点」之间「传输」文字、图片、音频、视频等「超文本」数据的「约定和规范」。</strong></p><h2 id="状态码">状态码</h2><p><img src="../../../static/study/network/%E4%BA%94%E5%A4%A7%E7%B1%BBHTTP%E7%8A%B6%E6%80%81%E7%A0%81.webp" alt=""></p><p><code>1xx</code> 类状态码属于<strong>提示信息</strong>，是协议处理中的一种中间状态，实际用到的比较少。</p><p><code>2xx</code> 类状态码表示服务器<strong>成功</strong>处理了客户端的请求，也是我们最愿意看到的状态。</p><ul><li><p>「<strong>200 OK</strong>」是最常见的成功状态码，表示一切正常。如果是非 <code>HEAD</code> 请求，服务器返回的响应头都会有 body 数据。</p></li><li><p>「<strong>204 No Content</strong>」也是常见的成功状态码，与 200 OK 基本相同，但响应头没有 body 数据。</p></li><li><p>「<strong>206 Partial Content</strong>」是应用于 HTTP 分块下载或断点续传，表示响应返回的 body 数据并不是资源的全部，而是其中的一部分，也是服务器处理成功的状态。</p></li></ul><p><code>3xx</code> 类状态码表示客户端请求的资源发生了变动，需要客户端用新的 URL 重新发送请求获取资源，也就是<strong>重定向</strong>。</p><ul><li>「<strong>301 Moved Permanently</strong>」表示永久重定向，说明请求的资源已经不存在了，需改用新的 URL 再次访问。</li><li>「<strong>302 Found</strong>」表示临时重定向，说明请求的资源还在，但暂时需要用另一个 URL 来访问。<ul><li>301 和 302 都会在响应头里使用字段 <code>Location</code>，指明后续要跳转的 URL，浏览器会自动重定向新的 URL。</li></ul></li><li>「<strong>304 Not Modified</strong>」不具有跳转的含义，表示资源未修改，重定向已存在的缓冲文件，也称缓存重定向，也就是告诉客户端可以继续使用缓存资源，用于缓存控制。</li></ul><p><code>4xx</code> 类状态码表示客户端发送的<strong>报文有误</strong>，服务器无法处理，也就是错误码的含义。</p><ul><li><p>「<strong>400 Bad Request</strong>」表示客户端请求的报文有错误，但只是个笼统的错误。</p></li><li><p>「<strong>403 Forbidden</strong>」表示服务器禁止访问资源，并不是客户端的请求出错。</p></li><li><p>「<strong>404 Not Found</strong>」表示请求的资源在服务器上不存在或未找到，所以无法提供给客户端。</p></li></ul><p><code>5xx</code> 类状态码表示客户端请求报文正确，但是<strong>服务器处理时内部发生了错误</strong>，属于服务器端的错误码。</p><ul><li><p>「<strong>500 Internal Server Error</strong>」与 400 类型，是个笼统通用的错误码，服务器发生了什么错误，我们并不知道。</p></li><li><p>「<strong>501 Not Implemented</strong>」表示客户端请求的功能还不支持，类似“即将开业，敬请期待”的意思。</p></li><li><p>「<strong>502 Bad Gateway</strong>」通常是服务器作为网关或代理时返回的错误码，表示服务器自身工作正常，访问后端服务器发生了错误。</p></li><li><p>「<strong>503 Service Unavailable</strong>」表示服务器当前很忙，暂时无法响应客户端，类似“网络服务正忙，请稍后重试”的意思。</p></li></ul><h2 id="常见字段">常见字段</h2><ol><li>Host：指定服务器域名</li><li>Content-Length：数据长度<ul><li><strong>HTTP 协议通过设置回车符、换行符作为 HTTP header 的边界，通过 Content-Length 字段作为 HTTP body 的边界，这两个方式都是为了解决“粘包”的问题</strong>。</li></ul></li><li>Connection：指定长连接机制</li><li>Content-Type：服务器为客户端返回数据时指定数据格式<ol><li><code>Content-Type: text/html; Charset=utf-8</code>代表服务器发送的是网页，编码格式是 utf-8</li><li><code>Accept: */*</code> 客户端请求时指定，表示自己可接受任何格式数据</li></ol></li><li>Content-Encoding：数据的压缩方法<ol><li><code>Content-Encoding: gzip</code> 服务器指定发送数据的压缩方法</li><li><code>Accept-Encoding: gzip, deflate</code> 客户端指定可接受哪些压缩方法</li></ol></li></ol><h2 id="请求方法">请求方法</h2><h3 id="GET-和-POST-方法都是安全和幂等的吗？">GET 和 POST 方法都是安全和幂等的吗？</h3><p>安全和幂等的概念：</p><ul><li>在 HTTP 协议里，所谓的「安全」是指请求方法不会「破坏」服务器上的资源。</li><li>所谓的「幂等」，意思是多次执行相同的操作，结果都是「相同」的。</li></ul><p>如果从 RFC 规范定义的语义来看：</p><ul><li><strong>GET 方法就是安全且幂等的</strong>，因为它是「只读」操作，无论操作多少次，服务器上的数据都是安全的，且每次的结果都是相同的。所以，<strong>可以对 GET 请求的数据做缓存，这个缓存可以做到浏览器本身上（彻底避免浏览器发请求），也可以做到代理上（如nginx），而且在浏览器中 GET 请求可以保存为书签</strong>。</li><li><strong>POST</strong> 因为是「新增或提交数据」的操作，会修改服务器上的资源，所以是<strong>不安全</strong>的，且多次提交数据就会创建多个资源，所以<strong>不是幂等</strong>的。所以，<strong>浏览器一般不会缓存 POST 请求，也不能把 POST 请求保存为书签</strong>。</li></ul><h2 id="缓存">缓存</h2><h3 id="强制缓存-200-from-disk-cache">强制缓存 200 from disk cache</h3><p><img src="../../../static/study/network/%E5%BC%BA%E5%88%B6%E7%BC%93%E5%AD%98.webp" alt=""></p><p>强缓存是利用下面这两个 HTTP 响应头部（Response Header）字段实现的，它们都用来表示资源在客户端缓存的有效期：</p><ul><li><code>Cache-Control</code>， 是一个相对时间；</li><li><code>Expires</code>，是一个绝对时间；</li></ul><p>如果 HTTP 响应头部同时有 Cache-Control 和 Expires 字段的话，<strong>Cache-Control 的优先级高于 Expires</strong> 。</p><p>Cache-control 选项更多一些，设置更加精细，所以建议使用 Cache-Control 来实现强缓存。具体的实现流程如下：</p><ul><li>当浏览器第一次请求访问服务器资源时，服务器会在返回这个资源的同时，在 Response 头部加上 Cache-Control，Cache-Control 中设置了过期时间大小；</li><li>浏览器再次请求访问服务器中的该资源时，会先<strong>通过请求资源的时间与 Cache-Control 中设置的过期时间大小，来计算出该资源是否过期</strong>，如果没有，则使用该缓存，否则重新请求服务器；</li><li>服务器再次收到请求后，会再次更新 Response 头部的 Cache-Control。</li></ul><h3 id="协商缓存">协商缓存</h3><p><img src="../../../static/study/network/%E7%BC%93%E5%AD%98etag.webp" alt=""></p><p>协商缓存可以基于两种头部来实现。</p><h4 id="第一种">第一种</h4><p>请求头部中的 <code>If-Modified-Since</code> 字段与响应头部中的 <code>Last-Modified</code> 字段实现</p><ul><li>响应头部中的 <code>Last-Modified</code>：标示这个响应资源的最后修改时间；</li><li>请求头部中的 <code>If-Modified-Since</code>：当资源过期了，发现响应头中具有 Last-Modified 声明，则再次发起请求的时候带上 Last-Modified 的时间，服务器收到请求后发现有 If-Modified-Since 则与被请求资源的最后修改时间进行对比（Last-Modified），如果最后修改时间较新（大），说明资源又被改过，则返回最新资源，HTTP 200 OK；如果最后修改时间较旧（小），说明资源无新修改，响应 HTTP 304 走缓存。</li></ul><h4 id="第二种-ETag">第二种 ETag</h4><p>请求头部中的 <code>If-None-Match</code> 字段与响应头部中的 <code>ETag</code> 字段，这两个字段的意思是：</p><ul><li>响应头部中 <code>Etag</code>：唯一标识响应资源；</li><li>请求头部中的 <code>If-None-Match</code>：当资源过期时，浏览器发现响应头里有 Etag，则再次向服务器发起请求时，会将请求头 If-None-Match 值设置为 Etag 的值。服务器收到请求后进行比对，如果资源没有变化返回 304，如果资源变化了返回 200。</li></ul><p>第一种实现方式是基于时间实现的，第二种实现方式是基于一个唯一标识实现的，相对来说后者可以更加准确地判断文件内容是否被修改，避免由于时间篡改导致的不可靠问题。</p><p>如果在第一次请求资源的时候，服务端返回的 HTTP 响应头部同时有 Etag 和 Last-Modified 字段，那么客户端再下一次请求的时候，如果带上了 ETag 和 Last-Modified 字段信息给服务端，<strong>这时 Etag 的优先级更高</strong>，也就是服务端先会判断 Etag 是否变化了，如果 Etag 有变化就不用在判断 Last-Modified 了，如果 Etag 没有变化，然后再看 Last-Modified。</p><p><strong>为什么 ETag 的优先级更高？</strong></p><p>因为 ETag 主要能解决 Last-Modified 几个比较难以解决的问题：</p><ol><li>在没有修改文件内容情况下文件的最后修改时间可能也会改变，这会导致客户端认为这文件被改动了，从而重新请求；</li><li>可能有些文件是在秒级以内修改的，<code>If-Modified-Since</code> 能检查到的粒度是秒级的，使用 Etag就能够保证这种需求下客户端在 1 秒内能刷新多次；</li><li>有些服务器不能精确获取文件的最后修改时间。</li></ol><p>注意，<strong>协商缓存这两个字段都需要配合强制缓存中 Cache-Control 字段来使用，只有在未能命中强制缓存的时候，才能发起带有协商缓存字段的请求</strong>。</p><p><img src="../../../static/study/network/http%E7%BC%93%E5%AD%98.webp" alt=""></p><p>当使用 ETag 字段实现的协商缓存的过程：</p><ul><li>当浏览器第一次请求访问服务器资源时，服务器会在返回这个资源的同时，在 Response 头部加上 ETag 唯一标识，这个唯一标识的值是根据当前请求的资源生成的；</li><li>当浏览器再次请求访问服务器中的该资源时，首先会先检查强制缓存是否过期：<ul><li>如果没有过期，则直接使用本地缓存；</li><li>如果缓存过期了，会在 Request 头部加上 If-None-Match 字段，该字段的值就是 ETag 唯一标识；</li></ul></li><li>服务器再次收到请求后，<strong>会根据请求中的 If-None-Match 值与当前请求的资源生成的唯一标识进行比较</strong>：<ul><li><strong>如果值相等，则返回 304 Not Modified，不会返回资源</strong>；</li><li>如果不相等，则返回 200 状态码和返回资源，并在 Response 头部加上新的 ETag 唯一标识；</li></ul></li><li>如果浏览器收到 304 的请求响应状态码，则会从本地缓存中加载资源，否则更新资源。</li></ul><h1 id="HTTPS">HTTPS</h1><ul><li>在 TCP 和 HTTP 网络层之间加入了 SSL/TLS 安全协议，使得报文能够加密传输。</li><li>而 HTTPS 在 TCP 三次握手之后，还需进行 SSL/TLS 的握手过程，才可进入加密报文传输。</li><li>HTTP 默认端口号是 80，HTTPS 默认端口号是 443。</li><li>HTTPS 协议需要向 CA（证书权威机构）申请数字证书，来保证服务器的身份是可信的。</li></ul><h2 id="HTTPS-双向认证">HTTPS 双向认证</h2><p>一般我们的 HTTPS 是单向认证，客户端只会验证了服务端的身份，但是服务端并不会验证客户端的身份。</p><p><img src="../../../static/study/network/%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81.webp" alt=""></p><p>如果用了双向认证方式，不仅客户端会验证服务端的身份，而且服务端也会验证客户端的身份。服务端一旦验证到请求自己的客户端为不可信任的，服务端就拒绝继续通信，客户端如果发现服务端为不可信任的，那么也中止通信。</p><h1 id="HTTP-2">HTTP 2</h1><p><img src="../../../static/study/network/25-HTTP2.webp" alt=""></p><h2 id="头部压缩">头部压缩</h2><p><code>HPACK</code> 算法：在客户端和服务器同时维护一张头信息表，所有字段都会存入这个表，生成一个索引号，以后只发送索引号，这样就<strong>提高速度</strong>了。</p><h2 id="二进制格式">二进制格式</h2><ul><li>HTTP/2 不再明文传输，而是全面采用了<strong>二进制格式</strong>，头信息和数据体都是二进制，来回发送不用二次转换格式，增加了数据传输的效率，节省字节</li><li>统称为帧（frame）：<strong>头信息帧（Headers Frame）和数据帧（Data Frame）</strong>，Frame 是 HTTP/2 最小单位。</li></ul><p><img src="../../../static/study/network/%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%B8%A7.webp" alt=""></p><h2 id="并发传输-Stream">并发传输 Stream</h2><p><img src="../../../static/study/network/stream.webp" alt=""></p><p>多路复用：</p><ul><li>一个 TCP 连接包含多个 Stream，Stream 里可以包含一个或多个 Message，Message 里包含一个或者多个 Frame</li><li>Message 对应 HTTP/1 中的请求或响应，由 HTTP 头部和包体构成</li><li>Stream ID 是独一无二的，所以 Stream 和 Stream 的帧可以乱序发送，接收端通过 Stream ID 有序组装成 HTTP 消息，最终 HTTP/2 可以并行交错地发送请求和响应。</li></ul><p><img src="../../../static/study/network/http2%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8.webp" alt=""></p><h2 id="服务端推送">服务端推送</h2><p><img src="../../../static/study/network/server%20push.webp" alt=""></p><ul><li>服务端不再被动地响应，可以<strong>主动</strong>向客户端发送消息。</li><li>客户端和服务器<strong>双方都可以建立 Stream</strong>， Stream ID 也是有区别的，客户端建立的 Stream 必须是奇数号，而服务器建立的 Stream 必须是偶数号。</li><li>比如，客户端通过 HTTP/1.1 请求从服务器那获取到了 HTML 文件，而 HTML 可能还需要依赖 CSS 来渲染页面，这时客户端还要再发起获取 CSS 文件的请求，需要两次消息往返，在 HTTP/2 中，客户端在访问 HTML 时，服务器可以直接主动推送 CSS 文件，减少了消息传递的次数。</li></ul><h2 id="缺陷">缺陷</h2><p>利用 Stream 的并发能力解决了应用层的队头阻塞的问题，但是 TCP 协议本身的特性依然会导致队头阻塞：</p><ul><li>HTTP/2 基于 TCP 协议来传输数据的，TCP 是字节流协议，TCP 层必须保证收到的字节数据是完整且连续的，这样 kernel 才会将 buffer 里的数据返回给应用层</li><li>当「前 1 个字节数据」没有到达时，后收到的字节数据只能存放在 buffer 里，只有等到这 1 个字节数据到达时，应用层才能从 kernel 中拿到数据</li><li>所以，一旦发生了丢包现象，就会触发 TCP 的重传机制，这样在一个 TCP 连接中的<strong>所有的 HTTP 请求都必须等待这个丢了的包被重传回来</strong>。</li></ul><p><img src="../../../static/study/network/tcp%E9%98%9F%E5%A4%B4%E9%98%BB%E5%A1%9E.webp" alt=""></p><h1 id="HTTP-3">HTTP 3</h1><p><img src="../../../static/study/network/27-HTTP3.webp" alt=""></p><h2 id="UDP">UDP</h2><p>HTTP/3 将 TCP 协议更换为 UDP 协议，利用 UDP 协议中的 QUIC 协议实现类似 TCP 的可靠性传输：</p><ul><li><strong>当某个流发生丢包时，只会阻塞这个流，其他流不会受到影响，因此不存在队头阻塞问题</strong></li></ul><h1 id="HTTP-和-RPC">HTTP 和 RPC</h1><ol><li>他们都是属于应用层，都可以选择使用 TCP 或者 UDP，服务发现方式不同</li><li>HTTP：超文本传输协议，属于协议<ul><li>多用于 <code>Browser/Server (B/S)</code> 架构</li><li>使用 DNS 解析获取 IP 信息</li></ul></li><li>RPC：远程过程调用，属于调用方式<ul><li>使用 <code>gRPC</code>，<code>thrift</code> 等协议可以做到远程调用</li><li>多用于 <code>Client/Server (C/S</code>)架构，多用于公司内部集群</li><li>使用 <code>Etcd</code> 等中间服务进行保存服务名和 IP 信息</li><li>定制化程度更高，可以采用更多序列化协议保存结构体数据，性能更好</li></ul></li><li><strong>HTTP 主要用于 B/S 架构，而 RPC 更多用于 C/S 架构。但现在其实已经没分那么清了，B/S 和 C/S 在慢慢融合，软件同时支持多端</strong>。</li><li><strong>HTTP/2.0</strong> 在 <strong>HTTP/1.1</strong> 的基础上做了优化，性能可能比很多 RPC 协议都要好，但由于是这几年才出来的，所以也不太可能取代掉 RPC。</li></ol><h1 id="HTTP-和-WebSocket">HTTP 和 WebSocket</h1><ul><li>TCP 协议本身是全双工，HTTP 基于的 TCP 协议，但是使用半双工</li><li>全双工：<strong>同一时间里</strong>，<strong>双方</strong>都可以<strong>主动</strong>向对方发送数据，比如 <code>Websocket</code></li><li>半双工：<strong>同一时间里</strong>，客户端和服务器<strong>只能有一方主动</strong>发数据，比如 <code>HTTP/1.1</code></li><li>HTTP 和 WebSocket 都处于应用层</li><li>WebSocket 为了应用于客户端和服务器频繁交互的场景，比如游戏</li><li>WebSocket 只有在建立连接时才用到了 HTTP，<strong>升级完成之后就跟 HTTP 没有任何关系了</strong></li><li>WebSocket 的数据格式也是<code>消息头+消息体</code>的形式：数据头（内含 payload 长度） + payload data</li></ul><h2 id="HTTP-轮询">HTTP 轮询</h2><p>轮询：网页的前端不断定时发 HTTP 请求到服务器，服务器收到请求后给客户端响应消息</p><h3 id="长轮询">长轮询</h3><p><strong>将超时设置的很大</strong>，比如 30 秒，在这 30 秒内只要服务器收到了扫码请求，就立马返回给客户端网页。如果超时，那就立马发起下一次请求。</p><p>他们本质都是客户端主动获取数据，多应用于简单场景，如扫码登录。</p><p>在网页游戏等，有大量数据需要推送时，则会出现 Websocket</p><h2 id="Websocket-建立连接">Websocket 建立连接</h2><p>使用协议升级的方式进行切换协议</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>Upgrade</span><br><span class="line"><span class="attribute">Upgrade</span><span class="punctuation">: </span>WebSocket</span><br><span class="line"><span class="attribute">Sec-WebSocket-Key</span><span class="punctuation">: </span>T2a6wZlAwhgQNqruZ2YUyg==\r\n</span><br></pre></td></tr></table></figure><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">101</span> Switching Protocols\r\n</span><br><span class="line"><span class="attribute">Sec-WebSocket-Accept</span><span class="punctuation">: </span>iBJKv/ALIW2DobfoA4dmr3JHBCY=\r\n</span><br><span class="line"><span class="attribute">Upgrade</span><span class="punctuation">: </span>WebSocket\r\n</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>Upgrade\r\n</span><br></pre></td></tr></table></figure><ul><li>Sec-WebSocket-Accept：一段随机生成的 base64 码</li><li>101 状态码：协议切换</li></ul><p><img src="../../../static/study/network/websocket.webp" alt=""></p><p><img src="../../../static/study/network/websocket2.webp" alt=""></p><h2 id="Websocket-消息格式">Websocket 消息格式</h2><p>数据包在这叫做帧</p><p><img src="../../../static/study/network/websocket3.webp" alt=""></p><p><strong>opcode 字段</strong>：这个是用来标志这是个<strong>什么类型</strong>的数据帧。比如。</p><ul><li>等于 1 ，是指text类型（<code>string</code>）的数据包</li><li>等于 2 ，是二进制数据类型（<code>[]byte</code>）的数据包</li><li>等于 8 ，是关闭连接的信号</li></ul><p><strong>payload 字段</strong>：存放的是我们<strong>真正想要传输的数据的长度</strong>，单位是<strong>字节</strong>。比如你要发送的数据是字符串：<code>111</code>，那它的长度就是3。</p><h3 id="读取方式">读取方式</h3><p>用最开始的7bit 做标志位，不管接下来的数据有多大，都<strong>先读最先的7个 bit</strong>：</p><ul><li>如果 <code>最开始的7bit</code> 的值是 0~125，那么它就表示了 <strong>payload 全部长度</strong>，只读最开始的 <code>7个bit</code> 就完事了。</li><li>如果是 <code>126（0x7E）</code>。那它表示 payload 的长度范围在 <code>126~65535</code> 之间，接下来还需要<strong>再读16bit</strong>。这16bit 会包含 payload 的真实长度。</li><li>如果是<code>127（0x7F）</code>。那它表示payload的长度范围<code>&gt;=65536</code>，接下来还需要<strong>再读64bit</strong>。这64bit会包含payload的长度。这能放2的64次方byte的数据，换算一下好多个TB，肯定够用了。</li></ul><p>引用 <a target="_blank" rel="noopener" href="https://xiaolincoding.com/network/">图解网络介绍 | 小林coding (xiaolincoding.com)</a></p><h1 id="OSI-七层">OSI 七层</h1><ol><li><strong>应用层（Application Layer）</strong>：<ul><li>应用层是 OSI 模型中最高层的层次，它提供了网络服务和应用程序之间的接口。在这一层，用户可以访问各种网络服务，如电子邮件、文件传输、远程登录等。</li><li>典型的应用层协议包括 HTTP、FTP、SMTP、POP 3、IMAP、DNS 等。</li></ul></li><li><strong>表示层（Presentation Layer）</strong>：<ul><li>表示层负责数据的格式化和编码，以便应用层能够正确地解释数据。它也负责数据的加密和解密，以确保数据在传输过程中的安全性。</li><li>典型的表示层协议包括 JPEG、GIF、ASCII、UTF-8、SSL 等。</li></ul></li><li><strong>会话层（Session Layer）</strong>：<ul><li>会话层负责建立、管理和维护应用程序之间的通信会话。它提供了一种机制，允许应用程序在通信过程中建立、终止和管理会话。</li><li>典型的会话层协议包括 NetBIOS、RPC、SSH 等。</li></ul></li><li><strong>传输层（Transport Layer）</strong>：<ul><li>传输层负责在网络中的两个节点之间提供端到端的数据传输服务。它将数据分割为适合传输的数据块，并确保数据的可靠传输，包括错误检测和纠正、流量控制和拥塞控制等功能。</li><li>典型的传输层协议包括 TCP、UDP 等。</li></ul></li><li><strong>网络层（Network Layer）</strong>：<ul><li>网络层负责在网络中的不同节点之间提供路由和转发服务。它定义了数据在网络中的传输路径，并处理数据包的路由选择、拆分和重组等任务。</li><li>典型的网络层协议包括 IP、ICMP、ARP、RIP、OSPF 等。</li></ul></li><li><strong>数据链路层（Data Link Layer）</strong>：<ul><li>数据链路层负责在相邻节点之间提供数据传输的物理连接和数据帧的传输。它处理数据帧的封装、发送和接收，以及物理介质的访问控制。</li><li>典型的数据链路层协议包括以太网、Wi-Fi、PPP、HDLC 等。</li></ul></li><li><strong>物理层（Physical Layer）</strong>：<ul><li>物理层负责定义网络的物理介质和传输技术，包括电缆、光纤、无线电等。它处理数据的传输速率、信号编码、物理连接和电气特性等。</li><li>典型的物理层标准包括 RJ 45、IEEE 802.3、IEEE 802.11 等。</li></ul></li></ol><h1 id="问题">问题</h1><h2 id="TCP-和-UDP-的区别？">TCP 和 UDP 的区别？</h2><ol><li><strong>TCP 有连接；UDP 无连接。</strong></li><li><strong>TCP 可靠；UDP 不可靠。</strong></li><li><strong>TCP 基于数据流；UDP 基于数据报。</strong></li><li>UDP 比 TCP 更高效。</li><li>TCP 发送缓冲区、接收缓冲区；UDP 只有接收缓冲区，没有发送缓冲区。</li></ol><h2 id="TCP-的可靠性传输怎么保证？">TCP 的可靠性传输怎么保证？</h2><p>保证可靠性的机制：</p><ol><li><strong>确认应答。</strong></li><li><strong>超时重传。</strong></li><li><strong>连接管理（三次握手和四次挥手）。</strong></li><li>拥塞控制</li><li>流量控制</li></ol><h2 id="TCP-为什么需要三次握手">TCP 为什么需要三次握手</h2><p>TCP 通讯的双方都是全双工的，所以他们彼此要证明自己和对方的发送能力和接收能力。 TCP 如果两次握手不能证明服务器端的发送能力和客户端的接受能力 -&gt; 两次握手。 <strong>TCP 至少需要三次握手才能证明彼此的全双工能力。</strong></p><h2 id="TCP-为什么需要四次挥手">TCP 为什么需要四次挥手</h2><ol><li>TCP 本身自带确认应答。</li><li>TCP 有接收缓冲区的任务可能没执行完。</li></ol></div><div class="article-licensing box"><div class="licensing-title"><p>计算机网络面试</p><p><a href="https://tomatoblog.netlify.app/Interview/network/">https://tomatoblog.netlify.app/Interview/network/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>TOMATO</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2024-02-13</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2024-03-26</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY 4.0" href="https://creativecommons.org/licenses/by/4.0/deed.zh">CC BY 4.0</a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/network/">network</a></div></article></div><div class="card"><nav class="post-navigation mt-4 level is-mobile card-content"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/Memo/tools/media-server/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">media-server build</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/Tutorial/Bash%20script/"><span class="level-item">Bash脚本编程</span><i class="level-item fas fa-chevron-right"></i></a></div></nav></div></div><style>.column.column-left,.column.column-right{display:none}</style><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/static/avatar.jpg" alt="ToMaTo"></figure><p class="title is-size-4 is-block" style="line-height:inherit">ToMaTo</p><p class="is-size-6 is-block">Back-end Developer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>GuangZhou, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">59</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">29</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/dontSerious/" target="_blank" rel="noopener" id="widget-follow">Github</a></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/04/"><span class="level-start"><span class="level-item">2024年04月</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/03/"><span class="level-start"><span class="level-item">2024年03月</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/02/"><span class="level-start"><span class="level-item">2024年02月</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/12/"><span class="level-start"><span class="level-item">2023年12月</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/11/"><span class="level-start"><span class="level-item">2023年11月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/10/"><span class="level-start"><span class="level-item">2023年10月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/09/"><span class="level-start"><span class="level-item">2023年09月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/08/"><span class="level-start"><span class="level-item">2023年08月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/06/"><span class="level-start"><span class="level-item">2023年06月</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/05/"><span class="level-start"><span class="level-item">2023年05月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/04/"><span class="level-start"><span class="level-item">2023年04月</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/03/"><span class="level-start"><span class="level-item">2023年03月</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/02/"><span class="level-start"><span class="level-item">2023年02月</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time datetime="2024-04-28T10:24:18.000Z">2024-04-28</time></p><p class="title"><a href="/FrontEnd/Flutter/">flutter 笔记</a></p><p class="categories"><a href="/categories/FrontEnd/">FrontEnd</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2024-03-26T06:43:15.000Z">2024-03-26</time></p><p class="title"><a href="/Interview/go/">go面试</a></p><p class="categories"><a href="/categories/Interview/">Interview</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2024-03-26T02:10:11.000Z">2024-03-26</time></p><p class="title"><a href="/Interview/datastruct/">数据结构和算法面试</a></p><p class="categories"><a href="/categories/Interview/">Interview</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2024-03-26T02:10:11.000Z">2024-03-26</time></p><p class="title"><a href="/Interview/distributed/">分布式面试</a></p><p class="categories"><a href="/categories/Interview/">Interview</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2024-03-16T07:28:10.000Z">2024-03-16</time></p><p class="title"><a href="/BackEnd/sql/index/">SQL 索引</a></p><p class="categories"><a href="/categories/BackEnd/">BackEnd</a></p></div></article></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#HTTP-1-1"><span class="level-left"><span class="level-item">1</span><span class="level-item">HTTP 1.1</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#优化"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">优化</span></span></a></li></ul></li><li><a class="level is-mobile" href="#HTTP"><span class="level-left"><span class="level-item">2</span><span class="level-item">HTTP</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#状态码"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">状态码</span></span></a></li><li><a class="level is-mobile" href="#常见字段"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">常见字段</span></span></a></li><li><a class="level is-mobile" href="#请求方法"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">请求方法</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#GET-和-POST-方法都是安全和幂等的吗？"><span class="level-left"><span class="level-item">2.3.1</span><span class="level-item">GET 和 POST 方法都是安全和幂等的吗？</span></span></a></li></ul></li><li><a class="level is-mobile" href="#缓存"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">缓存</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#强制缓存-200-from-disk-cache"><span class="level-left"><span class="level-item">2.4.1</span><span class="level-item">强制缓存 200 from disk cache</span></span></a></li><li><a class="level is-mobile" href="#协商缓存"><span class="level-left"><span class="level-item">2.4.2</span><span class="level-item">协商缓存</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#HTTPS"><span class="level-left"><span class="level-item">3</span><span class="level-item">HTTPS</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#HTTPS-双向认证"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">HTTPS 双向认证</span></span></a></li></ul></li><li><a class="level is-mobile" href="#HTTP-2"><span class="level-left"><span class="level-item">4</span><span class="level-item">HTTP 2</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#头部压缩"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">头部压缩</span></span></a></li><li><a class="level is-mobile" href="#二进制格式"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">二进制格式</span></span></a></li><li><a class="level is-mobile" href="#并发传输-Stream"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">并发传输 Stream</span></span></a></li><li><a class="level is-mobile" href="#服务端推送"><span class="level-left"><span class="level-item">4.4</span><span class="level-item">服务端推送</span></span></a></li><li><a class="level is-mobile" href="#缺陷"><span class="level-left"><span class="level-item">4.5</span><span class="level-item">缺陷</span></span></a></li></ul></li><li><a class="level is-mobile" href="#HTTP-3"><span class="level-left"><span class="level-item">5</span><span class="level-item">HTTP 3</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#UDP"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">UDP</span></span></a></li></ul></li><li><a class="level is-mobile" href="#HTTP-和-RPC"><span class="level-left"><span class="level-item">6</span><span class="level-item">HTTP 和 RPC</span></span></a></li><li><a class="level is-mobile" href="#HTTP-和-WebSocket"><span class="level-left"><span class="level-item">7</span><span class="level-item">HTTP 和 WebSocket</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#HTTP-轮询"><span class="level-left"><span class="level-item">7.1</span><span class="level-item">HTTP 轮询</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#长轮询"><span class="level-left"><span class="level-item">7.1.1</span><span class="level-item">长轮询</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Websocket-建立连接"><span class="level-left"><span class="level-item">7.2</span><span class="level-item">Websocket 建立连接</span></span></a></li><li><a class="level is-mobile" href="#Websocket-消息格式"><span class="level-left"><span class="level-item">7.3</span><span class="level-item">Websocket 消息格式</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#读取方式"><span class="level-left"><span class="level-item">7.3.1</span><span class="level-item">读取方式</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#OSI-七层"><span class="level-left"><span class="level-item">8</span><span class="level-item">OSI 七层</span></span></a></li><li><a class="level is-mobile" href="#问题"><span class="level-left"><span class="level-item">9</span><span class="level-item">问题</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#TCP-和-UDP-的区别？"><span class="level-left"><span class="level-item">9.1</span><span class="level-item">TCP 和 UDP 的区别？</span></span></a></li><li><a class="level is-mobile" href="#TCP-的可靠性传输怎么保证？"><span class="level-left"><span class="level-item">9.2</span><span class="level-item">TCP 的可靠性传输怎么保证？</span></span></a></li><li><a class="level is-mobile" href="#TCP-为什么需要三次握手"><span class="level-left"><span class="level-item">9.3</span><span class="level-item">TCP 为什么需要三次握手</span></span></a></li><li><a class="level is-mobile" href="#TCP-为什么需要四次挥手"><span class="level-left"><span class="level-item">9.4</span><span class="level-item">TCP 为什么需要四次挥手</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list>li>a.is-active+.menu-list{display:block}#toc .menu-list>li>a+.menu-list{display:none}</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/BackEnd/"><span class="level-start"><span class="level-item">BackEnd</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/categories/FrontEnd/"><span class="level-start"><span class="level-item">FrontEnd</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Interview/"><span class="level-start"><span class="level-item">Interview</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Memo/"><span class="level-start"><span class="level-item">Memo</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/Project/"><span class="level-start"><span class="level-item">Project</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Study/"><span class="level-start"><span class="level-item">Study</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/categories/Tutorial/"><span class="level-start"><span class="level-item">Tutorial</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Flutter/"><span class="tag">Flutter</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MIT6-S081/"><span class="tag">MIT6.S081</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/React/"><span class="tag">React</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TypeScript/"><span class="tag">TypeScript</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vue-js/"><span class="tag">Vue.js</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bookNote/"><span class="tag">bookNote</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/career/"><span class="tag">career</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cpp/"><span class="tag">cpp</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cs/"><span class="tag">cs</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csapp/"><span class="tag">csapp</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/curriculum/"><span class="tag">curriculum</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dataStruct/"><span class="tag">dataStruct</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/datastruct/"><span class="tag">datastruct</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/distributed/"><span class="tag">distributed</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/go/"><span class="tag">go</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/live/"><span class="tag">live</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/log/"><span class="tag">log</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/memo/"><span class="tag">memo</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/network/"><span class="tag">network</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nodejs/"><span class="tag">nodejs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/obsidian/"><span class="tag">obsidian</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/project/"><span class="tag">project</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/psychology/"><span class="tag">psychology</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/simpleBank/"><span class="tag">simpleBank</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sql/"><span class="tag">sql</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tools/"><span class="tag">tools</span><span class="tag">10</span></a></div></div></div></div></div></div><style>.column.column-left,.column.column-right{display:block}</style></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img class="logo-img" src="/static/avatar.jpg" alt="Tomato&#039;s Blog" height="28"><img class="logo-img-dark" src="/static/avatar.jpg" alt="Tomato&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2024 TOMATO</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/imaegoo/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/deed.zh"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="/js/imaegoo/jquery/3.3.1/dist/jquery.min.js"></script><script src="/js/imaegoo/moment/2.22.2/min/moment-with-locales.min.js"></script><script src="/js/imaegoo/clipboard/2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn")</script><script>var IcarusThemeSettings={article:{highlight:{clipboard:!0,fold:"unfolded"}}}</script><script src="/js/column.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="/js/imaegoo/cookieconsent/3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-right",
        content: {
          message: "此网站使用 Cookie，以启用评论系统和分析功能。",
          dismiss: "知道了",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="/js/imaegoo/lightgallery/1.10.0/dist/js/lightgallery.min.js" defer></script><script src="/js/imaegoo/justifiedGallery/3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><div class="searchbox-pinyin"><label class="checkbox"><input id="search-by-pinyin" type="checkbox" checked><span> 拼音检索</span></label></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/imaegoo/pinyin.js" defer></script><script src="/js/insight.js" defer></script><script>document.addEventListener("DOMContentLoaded",function(){loadInsight({contentUrl:"/content.json"},{hint:"想要查找什么...",untitled:"(无标题)",posts:"文章",pages:"页面",categories:"分类",tags:"标签"})})</script><script type="text/javascript" src="/js/imaegoo/imaegoo.js"></script><script type="text/javascript" src="/js/imaegoo/universe.js"></script></body></html>